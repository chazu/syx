<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Syx: syx/syx-init.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_fc3e1133dafecdd000c1fda58b369b20.html">syx</a>
  </div>
</div>
<div class="contents">
<h1>syx-init.c File Reference</h1><code>#include &quot;<a class="el" href="syx-memory_8h-source.html">syx-memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-types_8h-source.html">syx-types.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-error_8h-source.html">syx-error.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-plugins_8h-source.html">syx-plugins.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-init_8h-source.html">syx-init.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-signal_8h-source.html">syx-signal.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-utils_8h-source.html">syx-utils.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-scheduler_8h-source.html">syx-scheduler.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-object_8h-source.html">syx-object.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-interp_8h-source.html">syx-interp.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-profile_8h-source.html">syx-profile.h</a>&quot;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>

<p>
<a href="syx-init_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#1bff1fd86072dd98849437bc9dcb35c3">syx_string</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#0a366be8ef1ce96df07d6084ccfaa249">syx_find_file</a> (<a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> domain, <a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> package, <a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> filename)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#efeb166ace07f37fd380e8e290b18368">syx_build_basic</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#7b86f133ac732b3916ff9b295a719b9c">syx_fetch_basic</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#f7b7206eb53c182199d80bb08e014990">syx_initialize_system</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#890a4fe6fc8c8b546c995f03fb19d67d">syx_init</a> (<a class="el" href="syx-types_8h.html#18e1a1417591a1efb670b97ce320f535">syx_varsize</a> argc, <a class="el" href="syx-types_8h.html#1bff1fd86072dd98849437bc9dcb35c3">syx_string</a> *argv, <a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> root_path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#22715c2da20aedb6ef06b32053dc8a80">syx_quit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#481a3f64c46f5b828aea978939c74e4c">syx_get_root_path</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#ff01e7545e5741ba55b0584816243b05">syx_set_root_path</a> (<a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> root_path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#40ee7fef8570d7cf610390faa9b1b0b1">syx_set_image_path</a> (<a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> image_path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#f196de4e97fe418abd021a26120fdc3c">syx_get_image_path</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-init_8c.html#a635a8b40fe35e17b7d2441eb9c11623">syx_system_initialized</a> = FALSE</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="efeb166ace07f37fd380e8e290b18368"></a><!-- doxytag: member="syx-init.c::syx_build_basic" ref="efeb166ace07f37fd380e8e290b18368" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_build_basic           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a basic running image from scratch.<p>
This functions first reinitialize the memory with the size defined in SYX_INIT_MEMORY_SIZE. After, creates the 3 common constants syx_nil, syx_true and syx_false. Then creates all the classes needed by the VM, the Smalltalk dictionary and a dictionary containing all the symbols. Sets up the basic object hierarchy and insert each class into Smalltalk. Ends up this process by fileing in the basic declarations from initialDecl.st and the other *.st files, and calls syx_fetch_basic to fetch all classes in the VM. Finally, prepares the environment by running a blocking Process that calls Smalltalk&gt;&gt;initializeFirstSystem and initialize everything else from within Smalltalk itself. 
<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00183">183</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="7b86f133ac732b3916ff9b295a719b9c"></a><!-- doxytag: member="syx-init.c::syx_fetch_basic" ref="7b86f133ac732b3916ff9b295a719b9c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_fetch_basic           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00278">278</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00183">syx_build_basic()</a>, and <a class="el" href="syx-memory_8c-source.html#l00840">syx_memory_load_image()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0a366be8ef1ce96df07d6084ccfaa249"></a><!-- doxytag: member="syx-init.c::syx_find_file" ref="0a366be8ef1ce96df07d6084ccfaa249" args="(syx_symbol domain, syx_symbol package, syx_symbol filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#1bff1fd86072dd98849437bc9dcb35c3">syx_string</a> syx_find_file           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td>
          <td class="paramname"> <em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td>
          <td class="paramname"> <em>package</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a file path inside the Syx environment<p>
For example if you want a Smalltalk file of a package, specify the domain "st", the package name and the file name. 
<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00077">77</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="f196de4e97fe418abd021a26120fdc3c"></a><!-- doxytag: member="syx-init.c::syx_get_image_path" ref="f196de4e97fe418abd021a26120fdc3c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> syx_get_image_path           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the initial image path.<p>
This path won't be used once Syx is initialized. The image path will be obtained from the ImageFileName global 
<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00481">481</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

<p>Referenced by <a class="el" href="syx-memory_8c-source.html#l00840">syx_memory_load_image()</a>.</p>

</div>
</div><p>
<a class="anchor" name="481a3f64c46f5b828aea978939c74e4c"></a><!-- doxytag: member="syx-init.c::syx_get_root_path" ref="481a3f64c46f5b828aea978939c74e4c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a> syx_get_root_path           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the root directory of Syx.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a constant string containing the path of the root directory </dd></dl>

<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00424">424</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="890a4fe6fc8c8b546c995f03fb19d67d"></a><!-- doxytag: member="syx-init.c::syx_init" ref="890a4fe6fc8c8b546c995f03fb19d67d" args="(syx_varsize argc, syx_string *argv, syx_symbol root_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> syx_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#18e1a1417591a1efb670b97ce320f535">syx_varsize</a>&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1bff1fd86072dd98849437bc9dcb35c3">syx_string</a> *&nbsp;</td>
          <td class="paramname"> <em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td>
          <td class="paramname"> <em>root_path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Setup the basic external environment of Syx, such as the root and the image path.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>root_path</em>&nbsp;</td><td>an arbitrary root directory for Syx or NULL </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00347">347</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="f7b7206eb53c182199d80bb08e014990"></a><!-- doxytag: member="syx-init.c::syx_initialize_system" ref="f7b7206eb53c182199d80bb08e014990" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_initialize_system           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove Smalltalk startupProcess from being scheduled and send startupSystem: to Smalltalk in a scheduled process 
<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00318">318</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

<p>Referenced by <a class="el" href="syx-memory_8c-source.html#l00840">syx_memory_load_image()</a>.</p>

</div>
</div><p>
<a class="anchor" name="22715c2da20aedb6ef06b32053dc8a80"></a><!-- doxytag: member="syx-init.c::syx_quit" ref="22715c2da20aedb6ef06b32053dc8a80" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_quit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finalize Syx.<p>
Run special tasks to finalize the Syx process, such as clearing all the allocated memory 
<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00404">404</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="40ee7fef8570d7cf610390faa9b1b0b1"></a><!-- doxytag: member="syx-init.c::syx_set_image_path" ref="40ee7fef8570d7cf610390faa9b1b0b1" args="(syx_symbol image_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> syx_set_image_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td>
          <td class="paramname"> <em>image_path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the initial image path 
<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00463">463</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ff01e7545e5741ba55b0584816243b05"></a><!-- doxytag: member="syx-init.c::syx_set_root_path" ref="ff01e7545e5741ba55b0584816243b05" args="(syx_symbol root_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> syx_set_root_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#9663af54b7b72f5d8be5f754ef356525">syx_symbol</a>&nbsp;</td>
          <td class="paramname"> <em>root_path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the root directory of Syx.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>root_path</em>&nbsp;</td><td>the new path </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if the path exists and is readable </dd></dl>

<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00436">436</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00347">syx_init()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a635a8b40fe35e17b7d2441eb9c11623"></a><!-- doxytag: member="syx-init.c::syx_system_initialized" ref="a635a8b40fe35e17b7d2441eb9c11623" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> <a class="el" href="syx-init_8h.html#532ac7708947b6d7d89531593bc54492">syx_system_initialized</a> = FALSE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="syx-init_8c-source.html#l00059">59</a> of file <a class="el" href="syx-init_8c-source.html">syx-init.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00318">syx_initialize_system()</a>, <a class="el" href="syx-object_8c-source.html#l00095">syx_object_initialize()</a>, and <a class="el" href="syx-error_8c-source.html#l00125">syx_signal()</a>.</p>

</div>
</div><p>
</div>
<html>
<body>
<hr>
<i>Documented by <a href="http://lethalman.blogspot.com/">Luca Bruno</a> and <a href="http://scacco-matto.blogspot.com/">ScaccoMatto</a></i>
</body>
</html>
