<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Syx: syx/syx-interp.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_fc3e1133dafecdd000c1fda58b369b20.html">syx</a>
  </div>
</div>
<div class="contents">
<h1>syx-interp.c File Reference</h1><code>#include &quot;<a class="el" href="syx-object_8h-source.html">syx-object.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-interp_8h-source.html">syx-interp.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-utils_8h-source.html">syx-utils.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-scheduler_8h-source.html">syx-scheduler.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-init_8h-source.html">syx-init.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-plugins_8h-source.html">syx-plugins.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-memory_8h-source.html">syx-memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-bytecode_8h-source.html">syx-bytecode.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-error_8h-source.html">syx-error.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="syx-profile_8h-source.html">syx-profile.h</a>&quot;</code><br>
<code>#include &lt;assert.h&gt;</code><br>

<p>
<a href="syx-interp_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_syx_interp_frame.html">SyxInterpFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#2fe6a5f292ce5d9ab3103878b6d3d7cf">syx_interp_context_to_frame</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> context)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#f8844c877ec9281208ea602d73880c0f">syx_interp_frame_to_context</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> stack, <a class="el" href="struct_syx_interp_frame.html">SyxInterpFrame</a> *frame)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#74bb3b8c0b72fcd2b2d2c7c7bba5f5e2">syx_interp_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#41a4fa9a3836e8750667a4134b60835f">syx_interp_quit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#67ca91c8a692283098cb5b9c1da4f7ab">syx_interp_swap_context</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> process, <a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> context)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#e483ac8c92a367fc44460969715106d9">syx_interp_enter_context</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> process, <a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> context)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#0c2ace1d18e0f3649ca19345bb5a89d5">syx_interp_leave_and_answer</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> return_object, <a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> use_stack_return)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#86764c60b013f2d11406a06ef5703735">syx_process_execute_scheduled</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> process)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syx-interp_8c.html#34287a6590d55ee7225b0437a73609b0">syx_process_execute_blocking</a> (<a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> process)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="2fe6a5f292ce5d9ab3103878b6d3d7cf"></a><!-- doxytag: member="syx-interp.c::syx_interp_context_to_frame" ref="2fe6a5f292ce5d9ab3103878b6d3d7cf" args="(SyxOop context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_syx_interp_frame.html">SyxInterpFrame</a>* syx_interp_context_to_frame           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>context</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the frame associated to the given context 
<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00165">165</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

<p>Referenced by <a class="el" href="syx-interp_8c-source.html#l00240">syx_interp_swap_context()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e483ac8c92a367fc44460969715106d9"></a><!-- doxytag: member="syx-interp.c::syx_interp_enter_context" ref="e483ac8c92a367fc44460969715106d9" args="(SyxOop process, SyxOop context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> syx_interp_enter_context           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enters a new MethodContext or BlockContext.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE if the context was syx_nil </dd></dl>

<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00271">271</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00183">syx_build_basic()</a>, <a class="el" href="syx-utils_8c-source.html#l00560">syx_do_it_blocking()</a>, <a class="el" href="syx-utils_8c-source.html#l00539">syx_file_in_blocking()</a>, <a class="el" href="syx-init_8c-source.html#l00318">syx_initialize_system()</a>, <a class="el" href="syx-memory_8c-source.html#l00142">syx_memory_clear()</a>, <a class="el" href="syx-object_8c-source.html#l00814">syx_object_free()</a>, <a class="el" href="syx-object_8c-source.html#l00095">syx_object_initialize()</a>, <a class="el" href="syx-error_8c-source.html#l00125">syx_signal()</a>, and <a class="el" href="syx-error_8c-source.html#l00191">syx_signal_does_not_understand()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f8844c877ec9281208ea602d73880c0f"></a><!-- doxytag: member="syx-interp.c::syx_interp_frame_to_context" ref="f8844c877ec9281208ea602d73880c0f" args="(SyxOop stack, SyxInterpFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a> syx_interp_frame_to_context           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_syx_interp_frame.html">SyxInterpFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a MethodContext or BlockContext from a frame<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stack</em>&nbsp;</td><td>the OOP of the whole stack, e.g. SYX_PROCESS_STACK (aProcess). This will not be used if the frame has been detached. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a new context </dd></dl>

<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00179">179</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="74bb3b8c0b72fcd2b2d2c7c7bba5f5e2"></a><!-- doxytag: member="syx-interp.c::syx_interp_init" ref="74bb3b8c0b72fcd2b2d2c7c7bba5f5e2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_interp_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the interpreter to be ready to execute processes.<p>
This function is called internally by Syx and should not be called from user applications. 
<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00219">219</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00278">syx_fetch_basic()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0c2ace1d18e0f3649ca19345bb5a89d5"></a><!-- doxytag: member="syx-interp.c::syx_interp_leave_and_answer" ref="0c2ace1d18e0f3649ca19345bb5a89d5" args="(SyxOop return_object, syx_bool use_stack_return)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> syx_interp_leave_and_answer           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>return_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a>&nbsp;</td>
          <td class="paramname"> <em>use_stack_return</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Leaves the current frame and push an object into the returning context.<p>
Use the stack return frame use_stack_return is specified, otherwise use the parent frame. Then sets the returned object variable of the process to the specified object. Finally swap the context with the new one. Terminate the process if no valid return frame is found.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>return_object</em>&nbsp;</td><td>the object to be pushed into the returning context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>use_stack_return</em>&nbsp;</td><td>TRUE to use the stack return frame, FALSE to use the parent frame </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE if no valid return frame is found </dd></dl>

<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00334">334</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="41a4fa9a3836e8750667a4134b60835f"></a><!-- doxytag: member="syx-interp.c::syx_interp_quit" ref="41a4fa9a3836e8750667a4134b60835f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_interp_quit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finalize the execution of processes and free all the memory used by the interpreter.<p>
This function is called internally by Syx e should not be called from user applications 
<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00229">229</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00404">syx_quit()</a>.</p>

</div>
</div><p>
<a class="anchor" name="67ca91c8a692283098cb5b9c1da4f7ab"></a><!-- doxytag: member="syx-interp.c::syx_interp_swap_context" ref="67ca91c8a692283098cb5b9c1da4f7ab" args="(SyxOop process, SyxOop context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syx-types_8h.html#c6dc09b276b99fa1956364359139daab">syx_bool</a> syx_interp_swap_context           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Swap the current context with the given one. The context must be already existing in the process stack.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE if the context was syx_nil </dd></dl>

<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00240">240</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="34287a6590d55ee7225b0437a73609b0"></a><!-- doxytag: member="syx-interp.c::syx_process_execute_blocking" ref="34287a6590d55ee7225b0437a73609b0" args="(SyxOop process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_process_execute_blocking           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>process</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Same as syx_process_execute_scheduled but does not take care about the byteslice counter, and control is not yield until the process is terminated. 
<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00390">390</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

<p>Referenced by <a class="el" href="syx-init_8c-source.html#l00183">syx_build_basic()</a>, <a class="el" href="syx-utils_8c-source.html#l00560">syx_do_it_blocking()</a>, <a class="el" href="syx-utils_8c-source.html#l00539">syx_file_in_blocking()</a>, <a class="el" href="syx-init_8c-source.html#l00318">syx_initialize_system()</a>, <a class="el" href="syx-memory_8c-source.html#l00142">syx_memory_clear()</a>, <a class="el" href="syx-object_8c-source.html#l00814">syx_object_free()</a>, <a class="el" href="syx-object_8c-source.html#l00095">syx_object_initialize()</a>, and <a class="el" href="syx-error_8c-source.html#l00125">syx_signal()</a>.</p>

</div>
</div><p>
<a class="anchor" name="86764c60b013f2d11406a06ef5703735"></a><!-- doxytag: member="syx-interp.c::syx_process_execute_scheduled" ref="86764c60b013f2d11406a06ef5703735" args="(SyxOop process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syx_process_execute_scheduled           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syx-types_8h.html#1121caba2d40b2ce090b640762744ccd">SyxOop</a>&nbsp;</td>
          <td class="paramname"> <em>process</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Executes the given process and returns once the byteslice is reached, no more instructions left or yield has been requested.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>process</em>&nbsp;</td><td>must not be nil </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="syx-interp_8c-source.html#l00368">368</a> of file <a class="el" href="syx-interp_8c-source.html">syx-interp.c</a>.</p>

<p>Referenced by <a class="el" href="syx-scheduler_8c-source.html#l00118">syx_scheduler_iterate()</a>, and <a class="el" href="syx-scheduler_8c-source.html#l00132">syx_scheduler_run()</a>.</p>

</div>
</div><p>
</div>
<html>
<body>
<hr>
<i>Documented by <a href="http://lethalman.blogspot.com/">Luca Bruno</a> and <a href="http://scacco-matto.blogspot.com/">ScaccoMatto</a></i>
</body>
</html>
