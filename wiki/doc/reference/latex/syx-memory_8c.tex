\hypertarget{syx-memory_8c}{
\section{syx/syx-memory.c File Reference}
\label{syx-memory_8c}\index{syx/syx-memory.c@{syx/syx-memory.c}}
}
{\tt \#include \char`\"{}syx-config.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-memory.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-object.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-error.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-scheduler.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-utils.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-interp.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-profile.h\char`\"{}}\par
{\tt \#include $<$assert.h$>$}\par
{\tt \#include $<$unistd.h$>$}\par
{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$gmp.h$>$}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct \hyperlink{struct_syx_memory_lazy_pointer}{SyxMemoryLazyPointer}
\end{CompactItemize}
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define \hyperlink{syx-memory_8c_37057b4e55064ea756bd4713d9b9d3b2}{SYX\_\-MEMORY\_\-TOP}~(\&\hyperlink{syx-object_8h_596eb1af08585a501808735d80503037}{syx\_\-memory}\mbox{[}\_\-syx\_\-memory\_\-size - 1\mbox{]})
\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef struct \hyperlink{struct_syx_memory_lazy_pointer}{SyxMemoryLazyPointer} \hyperlink{syx-memory_8c_02d5517a6ca46e6109ab7065d4836c3e}{SyxMemoryLazyPointer}
\end{CompactItemize}
\subsection*{Enumerations}
\begin{CompactItemize}
\item 
enum \hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212}{SyxMemoryType} \{ \par
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582121da8e30583f5a53802d7750795593f0b}{SYX\_\-MEMORY\_\-TYPE\_\-IMMEDIATE}, 
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582120870010754185f10ef870463a888983a}{SYX\_\-MEMORY\_\-TYPE\_\-OBJECT}, 
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582123db01c9c9757cca8fd8c9039588f284c}{SYX\_\-MEMORY\_\-TYPE\_\-FRAME\_\-POINTER}, 
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212b3562267ea94c7fe3d677bae4bfa6d24}{SYX\_\-MEMORY\_\-TYPE\_\-NORMAL}, 
\par
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212513d41a66da4ce1bd602713020448d79}{SYX\_\-MEMORY\_\-TYPE\_\-LARGE\_\-INTEGER}, 
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582126981c2e1f08c487a2f9cf5df50019182}{SYX\_\-MEMORY\_\-TYPE\_\-BOF}, 
\hyperlink{syx-memory_8c_3c7c89c36d5970f74340ceffe8b5821298093ab7fdeac562eda67bcf508c8635}{SYX\_\-MEMORY\_\-TYPE\_\-EOS}
 \}
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void \hyperlink{syx-memory_8c_f05eed3c8106e186265edf51194b912c}{syx\_\-memory\_\-init} (\hyperlink{syx-types_8h_9f31c17555a2dfcf25da84b5c4a2e55b}{syx\_\-int32} mem\_\-size)
\item 
void \hyperlink{syx-memory_8c_a035cb5cf9b570cb6584d6cd4aafe512}{syx\_\-memory\_\-clear} (void)
\item 
\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} \hyperlink{syx-memory_8c_bcaea59428ce48c03c68b1058a089fb2}{syx\_\-memory\_\-alloc} (void)
\item 
void \hyperlink{syx-memory_8c_af66c4dd6200e6cc9bb87e7b28921599}{syx\_\-memory\_\-gc} (void)
\item 
\hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-memory_8c_693fc1a91ed11515e100275d7f99b413}{syx\_\-memory\_\-save\_\-image} (\hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} path)
\item 
\hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-memory_8c_6a35f8cdd18f1615df7de7ac81911c95}{syx\_\-memory\_\-load\_\-image} (\hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} path)
\item 
void \hyperlink{syx-memory_8c_31d33852bc51d3d58ea0bc9fbfd4d9e1}{syx\_\-memory\_\-gc\_\-end} (void)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
\hyperlink{struct_syx_object}{SyxObject} $\ast$ \hyperlink{syx-memory_8c_e9e3c062a63b7ee6b13ca9e026af87b6}{syx\_\-memory}
\end{CompactItemize}


\subsection{Define Documentation}
\hypertarget{syx-memory_8c_37057b4e55064ea756bd4713d9b9d3b2}{
\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TOP@{SYX\_\-MEMORY\_\-TOP}}
\index{SYX\_\-MEMORY\_\-TOP@{SYX\_\-MEMORY\_\-TOP}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SYX\_\-MEMORY\_\-TOP~(\&{\bf syx\_\-memory}\mbox{[}\_\-syx\_\-memory\_\-size - 1\mbox{]})}}
\label{syx-memory_8c_37057b4e55064ea756bd4713d9b9d3b2}




Definition at line 56 of file syx-memory.c.

Referenced by syx\_\-memory\_\-clear(), syx\_\-memory\_\-init(), and syx\_\-memory\_\-save\_\-image().

\subsection{Typedef Documentation}
\hypertarget{syx-memory_8c_02d5517a6ca46e6109ab7065d4836c3e}{
\index{syx-memory.c@{syx-memory.c}!SyxMemoryLazyPointer@{SyxMemoryLazyPointer}}
\index{SyxMemoryLazyPointer@{SyxMemoryLazyPointer}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf SyxMemoryLazyPointer} {\bf SyxMemoryLazyPointer}}}
\label{syx-memory_8c_02d5517a6ca46e6109ab7065d4836c3e}




Definition at line 71 of file syx-memory.c.

\subsection{Enumeration Type Documentation}
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212}{
\index{syx-memory.c@{syx-memory.c}!SyxMemoryType@{SyxMemoryType}}
\index{SyxMemoryType@{SyxMemoryType}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}enum {\bf SyxMemoryType}}}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212}


\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{SYX\_\-MEMORY\_\-TYPE\_\-IMMEDIATE@{SYX\_\-MEMORY\_\-TYPE\_\-IMMEDIATE}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-IMMEDIATE@{SYX\_\-MEMORY\_\-TYPE\_\-IMMEDIATE}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582121da8e30583f5a53802d7750795593f0b}{
SYX\_\-MEMORY\_\-TYPE\_\-IMMEDIATE}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582121da8e30583f5a53802d7750795593f0b}
}]\index{SYX\_\-MEMORY\_\-TYPE\_\-OBJECT@{SYX\_\-MEMORY\_\-TYPE\_\-OBJECT}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-OBJECT@{SYX\_\-MEMORY\_\-TYPE\_\-OBJECT}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582120870010754185f10ef870463a888983a}{
SYX\_\-MEMORY\_\-TYPE\_\-OBJECT}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582120870010754185f10ef870463a888983a}
}]\index{SYX\_\-MEMORY\_\-TYPE\_\-FRAME\_\-POINTER@{SYX\_\-MEMORY\_\-TYPE\_\-FRAME\_\-POINTER}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-FRAME\_\-POINTER@{SYX\_\-MEMORY\_\-TYPE\_\-FRAME\_\-POINTER}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582123db01c9c9757cca8fd8c9039588f284c}{
SYX\_\-MEMORY\_\-TYPE\_\-FRAME\_\-POINTER}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582123db01c9c9757cca8fd8c9039588f284c}
}]\index{SYX\_\-MEMORY\_\-TYPE\_\-NORMAL@{SYX\_\-MEMORY\_\-TYPE\_\-NORMAL}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-NORMAL@{SYX\_\-MEMORY\_\-TYPE\_\-NORMAL}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212b3562267ea94c7fe3d677bae4bfa6d24}{
SYX\_\-MEMORY\_\-TYPE\_\-NORMAL}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212b3562267ea94c7fe3d677bae4bfa6d24}
}]\index{SYX\_\-MEMORY\_\-TYPE\_\-LARGE\_\-INTEGER@{SYX\_\-MEMORY\_\-TYPE\_\-LARGE\_\-INTEGER}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-LARGE\_\-INTEGER@{SYX\_\-MEMORY\_\-TYPE\_\-LARGE\_\-INTEGER}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212513d41a66da4ce1bd602713020448d79}{
SYX\_\-MEMORY\_\-TYPE\_\-LARGE\_\-INTEGER}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b58212513d41a66da4ce1bd602713020448d79}
}]\index{SYX\_\-MEMORY\_\-TYPE\_\-BOF@{SYX\_\-MEMORY\_\-TYPE\_\-BOF}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-BOF@{SYX\_\-MEMORY\_\-TYPE\_\-BOF}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582126981c2e1f08c487a2f9cf5df50019182}{
SYX\_\-MEMORY\_\-TYPE\_\-BOF}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b582126981c2e1f08c487a2f9cf5df50019182}
}]\index{SYX\_\-MEMORY\_\-TYPE\_\-EOS@{SYX\_\-MEMORY\_\-TYPE\_\-EOS}!syx-memory.c@{syx-memory.c}}\index{syx-memory.c@{syx-memory.c}!SYX\_\-MEMORY\_\-TYPE\_\-EOS@{SYX\_\-MEMORY\_\-TYPE\_\-EOS}}\item[{\em 
\hypertarget{syx-memory_8c_3c7c89c36d5970f74340ceffe8b5821298093ab7fdeac562eda67bcf508c8635}{
SYX\_\-MEMORY\_\-TYPE\_\-EOS}
\label{syx-memory_8c_3c7c89c36d5970f74340ceffe8b5821298093ab7fdeac562eda67bcf508c8635}
}]\end{description}
\end{Desc}



Definition at line 58 of file syx-memory.c.

\subsection{Function Documentation}
\hypertarget{syx-memory_8c_bcaea59428ce48c03c68b1058a089fb2}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-alloc@{syx\_\-memory\_\-alloc}}
\index{syx\_\-memory\_\-alloc@{syx\_\-memory\_\-alloc}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf SyxOop} syx\_\-memory\_\-alloc (void)}}
\label{syx-memory_8c_bcaea59428ce48c03c68b1058a089fb2}


Returns a new SyxOop 

Definition at line 183 of file syx-memory.c.

Referenced by syx\_\-build\_\-basic(), syx\_\-object\_\-copy(), and syx\_\-object\_\-new\_\-vars().\hypertarget{syx-memory_8c_a035cb5cf9b570cb6584d6cd4aafe512}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-clear@{syx\_\-memory\_\-clear}}
\index{syx\_\-memory\_\-clear@{syx\_\-memory\_\-clear}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-memory\_\-clear (void)}}
\label{syx-memory_8c_a035cb5cf9b570cb6584d6cd4aafe512}


Clears all the allocated memory 

Definition at line 142 of file syx-memory.c.

Referenced by syx\_\-build\_\-basic(), and syx\_\-quit().\hypertarget{syx-memory_8c_af66c4dd6200e6cc9bb87e7b28921599}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-gc@{syx\_\-memory\_\-gc}}
\index{syx\_\-memory\_\-gc@{syx\_\-memory\_\-gc}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-memory\_\-gc (void)}}
\label{syx-memory_8c_af66c4dd6200e6cc9bb87e7b28921599}


Calls the Syx garbage collector 

Definition at line 295 of file syx-memory.c.

Referenced by syx\_\-memory\_\-alloc(), and syx\_\-memory\_\-save\_\-image().\hypertarget{syx-memory_8c_31d33852bc51d3d58ea0bc9fbfd4d9e1}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-gc\_\-end@{syx\_\-memory\_\-gc\_\-end}}
\index{syx\_\-memory\_\-gc\_\-end@{syx\_\-memory\_\-gc\_\-end}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-memory\_\-gc\_\-end (void)}}
\label{syx-memory_8c_31d33852bc51d3d58ea0bc9fbfd4d9e1}


Release a transaction started with syx\_\-memory\_\-gc\_\-begin and unmark all objects in the transaction 

Definition at line 954 of file syx-memory.c.

Referenced by syx\_\-interp\_\-frame\_\-to\_\-context(), and syx\_\-method\_\-context\_\-new().\hypertarget{syx-memory_8c_f05eed3c8106e186265edf51194b912c}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-init@{syx\_\-memory\_\-init}}
\index{syx\_\-memory\_\-init@{syx\_\-memory\_\-init}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-memory\_\-init ({\bf syx\_\-int32} {\em mem\_\-size})}}
\label{syx-memory_8c_f05eed3c8106e186265edf51194b912c}


Initialize or realloc the memory according to the given size 

Definition at line 109 of file syx-memory.c.

Referenced by syx\_\-build\_\-basic(), and syx\_\-memory\_\-load\_\-image().\hypertarget{syx-memory_8c_6a35f8cdd18f1615df7de7ac81911c95}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-load\_\-image@{syx\_\-memory\_\-load\_\-image}}
\index{syx\_\-memory\_\-load\_\-image@{syx\_\-memory\_\-load\_\-image}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf syx\_\-bool} syx\_\-memory\_\-load\_\-image ({\bf syx\_\-symbol} {\em path})}}
\label{syx-memory_8c_6a35f8cdd18f1615df7de7ac81911c95}


Loads the memory.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em path}]the file containing the data dumped by syx\_\-memory\_\-save\_\-image \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]FALSE if an error occurred \end{Desc}


Definition at line 840 of file syx-memory.c.\hypertarget{syx-memory_8c_693fc1a91ed11515e100275d7f99b413}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory\_\-save\_\-image@{syx\_\-memory\_\-save\_\-image}}
\index{syx\_\-memory\_\-save\_\-image@{syx\_\-memory\_\-save\_\-image}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf syx\_\-bool} syx\_\-memory\_\-save\_\-image ({\bf syx\_\-symbol} {\em path})}}
\label{syx-memory_8c_693fc1a91ed11515e100275d7f99b413}


Dumps all the memory.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em path}]the file path to put all inside \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]FALSE if an error occurred \end{Desc}


Definition at line 594 of file syx-memory.c.

\subsection{Variable Documentation}
\hypertarget{syx-memory_8c_e9e3c062a63b7ee6b13ca9e026af87b6}{
\index{syx-memory.c@{syx-memory.c}!syx\_\-memory@{syx\_\-memory}}
\index{syx\_\-memory@{syx\_\-memory}!syx-memory.c@{syx-memory.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf SyxObject}$\ast$ {\bf syx\_\-memory}}}
\label{syx-memory_8c_e9e3c062a63b7ee6b13ca9e026af87b6}




Definition at line 50 of file syx-memory.c.

Referenced by syx\_\-fetch\_\-basic(), and syx\_\-show\_\-traceback().