\hypertarget{syx-scheduler_8h}{
\section{syx/syx-scheduler.h File Reference}
\label{syx-scheduler_8h}\index{syx/syx-scheduler.h@{syx/syx-scheduler.h}}
}
{\tt \#include \char`\"{}syx-platform.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-types.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-object.h\char`\"{}}\par
{\tt \#include $<$stdio.h$>$}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct \hyperlink{struct_syx_scheduler_poll}{SyxSchedulerPoll}
\end{CompactItemize}
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define \hyperlink{syx-scheduler_8h_a45ab87994042ea76587b30a1599aee1}{syx\_\-processor\_\-byteslice}~($\ast$\_\-syx\_\-processor\_\-byteslice)
\item 
\#define \hyperlink{syx-scheduler_8h_3785c5106dbc4cdcb992b6d17024da72}{syx\_\-processor\_\-active\_\-process}~($\ast$\_\-syx\_\-processor\_\-active\_\-process)
\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef struct \hyperlink{struct_syx_scheduler_poll}{SyxSchedulerPoll} \hyperlink{syx-scheduler_8h_27742a78647c979f853102fc71347c59}{SyxSchedulerPoll}
\item 
typedef \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool}($\ast$ \hyperlink{syx-scheduler_8h_6c2e31a7f026cdd3d5eb1fc0d263c63a}{SyxSchedulerSourceFunc} )(void)
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
EXPORT void \hyperlink{syx-scheduler_8h_dabe27943d73201de5aecf72519a687a}{syx\_\-scheduler\_\-init} (void)
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-scheduler_8h_17fade7b245e355201d773d0ba2286e0}{syx\_\-scheduler\_\-iterate} (void)
\item 
EXPORT void \hyperlink{syx-scheduler_8h_25f4d9193e601faf10f5937fb7c6b32e}{syx\_\-scheduler\_\-run} (void)
\item 
EXPORT void \hyperlink{syx-scheduler_8h_4bc3cad9e3d276d535f8d53e33c59501}{syx\_\-scheduler\_\-quit} (void)
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-scheduler_8h_2fb86e1bdec4b10a406b9da39d671a2d}{syx\_\-scheduler\_\-add\_\-process} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} process)
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-scheduler_8h_382b95da8a6469cf53510b05ae655f5e}{syx\_\-scheduler\_\-remove\_\-process} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} process)
\item 
EXPORT void \hyperlink{syx-scheduler_8h_599aa809cfc6c0074cc0736fd3ec64f7}{syx\_\-scheduler\_\-poll\_\-read\_\-register} (\hyperlink{syx-types_8h_488ad2504ade19c761a3e2a1726b4781}{syx\_\-nint} fd, \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} semaphore)
\item 
EXPORT void \hyperlink{syx-scheduler_8h_7fa996684cc72d14c8d575539c027b64}{syx\_\-scheduler\_\-poll\_\-write\_\-register} (\hyperlink{syx-types_8h_488ad2504ade19c761a3e2a1726b4781}{syx\_\-nint} fd, \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} semaphore)
\item 
EXPORT void \hyperlink{syx-scheduler_8h_09ca1323cd03da2a2b4ad2223d940c9e}{syx\_\-scheduler\_\-poll\_\-register\_\-source} (\hyperlink{syx-scheduler_8h_6c2e31a7f026cdd3d5eb1fc0d263c63a}{SyxSchedulerSourceFunc} callback, \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} semaphore)
\item 
EXPORT void \hyperlink{syx-scheduler_8h_1034940b95289f30cbbadf9737f63f3c}{syx\_\-scheduler\_\-poll\_\-unregister\_\-source} (\hyperlink{syx-scheduler_8h_6c2e31a7f026cdd3d5eb1fc0d263c63a}{SyxSchedulerSourceFunc} callback, \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} semaphore)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
SYX\_\-BEGIN\_\-DECLS EXPORT \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} \hyperlink{syx-scheduler_8h_7a21f5718c04cc99b3c4aaf22bdd6d7b}{syx\_\-processor}
\end{CompactItemize}


\subsection{Define Documentation}
\hypertarget{syx-scheduler_8h_3785c5106dbc4cdcb992b6d17024da72}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-processor\_\-active\_\-process@{syx\_\-processor\_\-active\_\-process}}
\index{syx\_\-processor\_\-active\_\-process@{syx\_\-processor\_\-active\_\-process}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define syx\_\-processor\_\-active\_\-process~($\ast$\_\-syx\_\-processor\_\-active\_\-process)}}
\label{syx-scheduler_8h_3785c5106dbc4cdcb992b6d17024da72}


Get the active process running on 

Definition at line 72 of file syx-scheduler.h.

Referenced by syx\_\-interp\_\-leave\_\-and\_\-answer(), syx\_\-memory\_\-save\_\-image(), syx\_\-process\_\-execute\_\-blocking(), syx\_\-scheduler\_\-add\_\-process(), syx\_\-scheduler\_\-iterate(), syx\_\-scheduler\_\-remove\_\-process(), syx\_\-scheduler\_\-run(), syx\_\-semaphore\_\-wait(), syx\_\-show\_\-traceback(), syx\_\-signal(), and syx\_\-signal\_\-does\_\-not\_\-understand().\hypertarget{syx-scheduler_8h_a45ab87994042ea76587b30a1599aee1}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-processor\_\-byteslice@{syx\_\-processor\_\-byteslice}}
\index{syx\_\-processor\_\-byteslice@{syx\_\-processor\_\-byteslice}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define syx\_\-processor\_\-byteslice~($\ast$\_\-syx\_\-processor\_\-byteslice)}}
\label{syx-scheduler_8h_a45ab87994042ea76587b30a1599aee1}


Get the byteslice 

Definition at line 69 of file syx-scheduler.h.

\subsection{Typedef Documentation}
\hypertarget{syx-scheduler_8h_27742a78647c979f853102fc71347c59}{
\index{syx-scheduler.h@{syx-scheduler.h}!SyxSchedulerPoll@{SyxSchedulerPoll}}
\index{SyxSchedulerPoll@{SyxSchedulerPoll}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf SyxSchedulerPoll} {\bf SyxSchedulerPoll}}}
\label{syx-scheduler_8h_27742a78647c979f853102fc71347c59}




Definition at line 41 of file syx-scheduler.h.\hypertarget{syx-scheduler_8h_6c2e31a7f026cdd3d5eb1fc0d263c63a}{
\index{syx-scheduler.h@{syx-scheduler.h}!SyxSchedulerSourceFunc@{SyxSchedulerSourceFunc}}
\index{SyxSchedulerSourceFunc@{SyxSchedulerSourceFunc}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf syx\_\-bool}($\ast$  {\bf SyxSchedulerSourceFunc})(void)}}
\label{syx-scheduler_8h_6c2e31a7f026cdd3d5eb1fc0d263c63a}




Definition at line 53 of file syx-scheduler.h.

\subsection{Function Documentation}
\hypertarget{syx-scheduler_8h_2fb86e1bdec4b10a406b9da39d671a2d}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-add\_\-process@{syx\_\-scheduler\_\-add\_\-process}}
\index{syx\_\-scheduler\_\-add\_\-process@{syx\_\-scheduler\_\-add\_\-process}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} syx\_\-scheduler\_\-add\_\-process ({\bf SyxOop} {\em process})}}
\label{syx-scheduler_8h_2fb86e1bdec4b10a406b9da39d671a2d}


Add a Process to be scheduled. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em process}]a valid Process \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if the given Process has been scheduled successfully, FALSE otherwise \end{Desc}


Definition at line 209 of file syx-scheduler.c.

Referenced by syx\_\-process\_\-new().\hypertarget{syx-scheduler_8h_dabe27943d73201de5aecf72519a687a}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-init@{syx\_\-scheduler\_\-init}}
\index{syx\_\-scheduler\_\-init@{syx\_\-scheduler\_\-init}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-init (void)}}
\label{syx-scheduler_8h_dabe27943d73201de5aecf72519a687a}


Initialize the scheduler.

If absent, create a ProcessorScheduler instance named Processor and insert it into the Smalltalk dictionary. 

Definition at line 97 of file syx-scheduler.c.

Referenced by syx\_\-fetch\_\-basic().\hypertarget{syx-scheduler_8h_17fade7b245e355201d773d0ba2286e0}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-iterate@{syx\_\-scheduler\_\-iterate}}
\index{syx\_\-scheduler\_\-iterate@{syx\_\-scheduler\_\-iterate}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} syx\_\-scheduler\_\-iterate (void)}}
\label{syx-scheduler_8h_17fade7b245e355201d773d0ba2286e0}


Do a single iteration of the scheduler. Returns FALSE when no pending processes are left. 

Definition at line 118 of file syx-scheduler.c.\hypertarget{syx-scheduler_8h_599aa809cfc6c0074cc0736fd3ec64f7}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-poll\_\-read\_\-register@{syx\_\-scheduler\_\-poll\_\-read\_\-register}}
\index{syx\_\-scheduler\_\-poll\_\-read\_\-register@{syx\_\-scheduler\_\-poll\_\-read\_\-register}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-poll\_\-read\_\-register ({\bf syx\_\-nint} {\em fd}, \/  {\bf SyxOop} {\em semaphore})}}
\label{syx-scheduler_8h_599aa809cfc6c0074cc0736fd3ec64f7}


Watch a file descriptor for writing

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fd}]the file descriptor \item[{\em semaphore}]to signal when fd is ready for reading\end{description}
\end{Desc}
Watch a file descriptor for writing

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fd}]the HANDLE \item[{\em semaphore}]to signal when fd is ready for reading \end{description}
\end{Desc}


Definition at line 150 of file syx-scheduler-posix.c.\hypertarget{syx-scheduler_8h_09ca1323cd03da2a2b4ad2223d940c9e}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-poll\_\-register\_\-source@{syx\_\-scheduler\_\-poll\_\-register\_\-source}}
\index{syx\_\-scheduler\_\-poll\_\-register\_\-source@{syx\_\-scheduler\_\-poll\_\-register\_\-source}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-poll\_\-register\_\-source ({\bf SyxSchedulerSourceFunc} {\em callback}, \/  {\bf SyxOop} {\em semaphore})}}
\label{syx-scheduler_8h_09ca1323cd03da2a2b4ad2223d940c9e}


The scheduler runs the callback to check whether the source is ready then signal the semaphore. To tell that the source is ready, return TRUE from the callback, otherwise FALSE.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em callback}]the callback to call for each scheduler iteration \item[{\em semaphore}]the semaphore to signal when the source is ready \end{description}
\end{Desc}


Definition at line 166 of file syx-scheduler.c.\hypertarget{syx-scheduler_8h_1034940b95289f30cbbadf9737f63f3c}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-poll\_\-unregister\_\-source@{syx\_\-scheduler\_\-poll\_\-unregister\_\-source}}
\index{syx\_\-scheduler\_\-poll\_\-unregister\_\-source@{syx\_\-scheduler\_\-poll\_\-unregister\_\-source}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-poll\_\-unregister\_\-source ({\bf SyxSchedulerSourceFunc} {\em callback}, \/  {\bf SyxOop} {\em semaphore})}}
\label{syx-scheduler_8h_1034940b95289f30cbbadf9737f63f3c}


Remove an idle source previously added with syx\_\-scheduler\_\-poll\_\-register\_\-source 

Definition at line 179 of file syx-scheduler.c.\hypertarget{syx-scheduler_8h_7fa996684cc72d14c8d575539c027b64}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-poll\_\-write\_\-register@{syx\_\-scheduler\_\-poll\_\-write\_\-register}}
\index{syx\_\-scheduler\_\-poll\_\-write\_\-register@{syx\_\-scheduler\_\-poll\_\-write\_\-register}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-poll\_\-write\_\-register ({\bf syx\_\-nint} {\em fd}, \/  {\bf SyxOop} {\em semaphore})}}
\label{syx-scheduler_8h_7fa996684cc72d14c8d575539c027b64}


Watch a file descriptor for writing

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fd}]the file descriptor \item[{\em semaphore}]to signal when fd is ready for writing\end{description}
\end{Desc}
Watch a file descriptor for writing

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fd}]the HANDLE \item[{\em semaphore}]to signal when fd is ready for writing \end{description}
\end{Desc}


Definition at line 172 of file syx-scheduler-posix.c.\hypertarget{syx-scheduler_8h_4bc3cad9e3d276d535f8d53e33c59501}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-quit@{syx\_\-scheduler\_\-quit}}
\index{syx\_\-scheduler\_\-quit@{syx\_\-scheduler\_\-quit}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-quit (void)}}
\label{syx-scheduler_8h_4bc3cad9e3d276d535f8d53e33c59501}


Stop the scheduler 

Definition at line 200 of file syx-scheduler.c.

Referenced by syx\_\-quit().\hypertarget{syx-scheduler_8h_382b95da8a6469cf53510b05ae655f5e}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-remove\_\-process@{syx\_\-scheduler\_\-remove\_\-process}}
\index{syx\_\-scheduler\_\-remove\_\-process@{syx\_\-scheduler\_\-remove\_\-process}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} syx\_\-scheduler\_\-remove\_\-process ({\bf SyxOop} {\em process})}}
\label{syx-scheduler_8h_382b95da8a6469cf53510b05ae655f5e}


Remove a Process from being scheduled. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em process}]a valid Process \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if the given Process has been found and removed successfully, FALSE otherwise \end{Desc}


Definition at line 229 of file syx-scheduler.c.

Referenced by syx\_\-initialize\_\-system(), syx\_\-interp\_\-leave\_\-and\_\-answer(), and syx\_\-process\_\-execute\_\-blocking().\hypertarget{syx-scheduler_8h_25f4d9193e601faf10f5937fb7c6b32e}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-scheduler\_\-run@{syx\_\-scheduler\_\-run}}
\index{syx\_\-scheduler\_\-run@{syx\_\-scheduler\_\-run}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-scheduler\_\-run (void)}}
\label{syx-scheduler_8h_25f4d9193e601faf10f5937fb7c6b32e}


Run the scheduler in blocking mode. Exits once no Process is scheduled 

Definition at line 132 of file syx-scheduler.c.

\subsection{Variable Documentation}
\hypertarget{syx-scheduler_8h_7a21f5718c04cc99b3c4aaf22bdd6d7b}{
\index{syx-scheduler.h@{syx-scheduler.h}!syx\_\-processor@{syx\_\-processor}}
\index{syx\_\-processor@{syx\_\-processor}!syx-scheduler.h@{syx-scheduler.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}SYX\_\-BEGIN\_\-DECLS EXPORT {\bf SyxOop} {\bf syx\_\-processor}}}
\label{syx-scheduler_8h_7a21f5718c04cc99b3c4aaf22bdd6d7b}




Definition at line 41 of file syx-scheduler.c.

Referenced by syx\_\-scheduler\_\-init().