\hypertarget{syx-interp_8c}{
\section{syx/syx-interp.c File Reference}
\label{syx-interp_8c}\index{syx/syx-interp.c@{syx/syx-interp.c}}
}
{\tt \#include \char`\"{}syx-object.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-interp.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-utils.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-scheduler.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-init.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-plugins.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-memory.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-bytecode.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-error.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-profile.h\char`\"{}}\par
{\tt \#include $<$assert.h$>$}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
\hyperlink{struct_syx_interp_frame}{SyxInterpFrame} $\ast$ \hyperlink{syx-interp_8c_2fe6a5f292ce5d9ab3103878b6d3d7cf}{syx\_\-interp\_\-context\_\-to\_\-frame} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} context)
\item 
\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} \hyperlink{syx-interp_8c_f8844c877ec9281208ea602d73880c0f}{syx\_\-interp\_\-frame\_\-to\_\-context} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} stack, \hyperlink{struct_syx_interp_frame}{SyxInterpFrame} $\ast$frame)
\item 
void \hyperlink{syx-interp_8c_74bb3b8c0b72fcd2b2d2c7c7bba5f5e2}{syx\_\-interp\_\-init} (void)
\item 
void \hyperlink{syx-interp_8c_41a4fa9a3836e8750667a4134b60835f}{syx\_\-interp\_\-quit} (void)
\item 
\hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-interp_8c_67ca91c8a692283098cb5b9c1da4f7ab}{syx\_\-interp\_\-swap\_\-context} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} process, \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} context)
\item 
\hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-interp_8c_e483ac8c92a367fc44460969715106d9}{syx\_\-interp\_\-enter\_\-context} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} process, \hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} context)
\item 
\hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-interp_8c_0c2ace1d18e0f3649ca19345bb5a89d5}{syx\_\-interp\_\-leave\_\-and\_\-answer} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} return\_\-object, \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} use\_\-stack\_\-return)
\item 
void \hyperlink{syx-interp_8c_86764c60b013f2d11406a06ef5703735}{syx\_\-process\_\-execute\_\-scheduled} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} process)
\item 
void \hyperlink{syx-interp_8c_34287a6590d55ee7225b0437a73609b0}{syx\_\-process\_\-execute\_\-blocking} (\hyperlink{syx-types_8h_1121caba2d40b2ce090b640762744ccd}{SyxOop} process)
\end{CompactItemize}


\subsection{Function Documentation}
\hypertarget{syx-interp_8c_2fe6a5f292ce5d9ab3103878b6d3d7cf}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-context\_\-to\_\-frame@{syx\_\-interp\_\-context\_\-to\_\-frame}}
\index{syx\_\-interp\_\-context\_\-to\_\-frame@{syx\_\-interp\_\-context\_\-to\_\-frame}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf SyxInterpFrame}$\ast$ syx\_\-interp\_\-context\_\-to\_\-frame ({\bf SyxOop} {\em context})}}
\label{syx-interp_8c_2fe6a5f292ce5d9ab3103878b6d3d7cf}


Returns the frame associated to the given context 

Definition at line 165 of file syx-interp.c.

Referenced by syx\_\-interp\_\-swap\_\-context().\hypertarget{syx-interp_8c_e483ac8c92a367fc44460969715106d9}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-enter\_\-context@{syx\_\-interp\_\-enter\_\-context}}
\index{syx\_\-interp\_\-enter\_\-context@{syx\_\-interp\_\-enter\_\-context}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf syx\_\-bool} syx\_\-interp\_\-enter\_\-context ({\bf SyxOop} {\em process}, \/  {\bf SyxOop} {\em context})}}
\label{syx-interp_8c_e483ac8c92a367fc44460969715106d9}


Enters a new MethodContext or BlockContext.

\begin{Desc}
\item[Returns:]FALSE if the context was syx\_\-nil \end{Desc}


Definition at line 271 of file syx-interp.c.

Referenced by syx\_\-build\_\-basic(), syx\_\-do\_\-it\_\-blocking(), syx\_\-file\_\-in\_\-blocking(), syx\_\-initialize\_\-system(), syx\_\-memory\_\-clear(), syx\_\-object\_\-free(), syx\_\-object\_\-initialize(), syx\_\-signal(), and syx\_\-signal\_\-does\_\-not\_\-understand().\hypertarget{syx-interp_8c_f8844c877ec9281208ea602d73880c0f}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-frame\_\-to\_\-context@{syx\_\-interp\_\-frame\_\-to\_\-context}}
\index{syx\_\-interp\_\-frame\_\-to\_\-context@{syx\_\-interp\_\-frame\_\-to\_\-context}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf SyxOop} syx\_\-interp\_\-frame\_\-to\_\-context ({\bf SyxOop} {\em stack}, \/  {\bf SyxInterpFrame} $\ast$ {\em frame})}}
\label{syx-interp_8c_f8844c877ec9281208ea602d73880c0f}


Creates a MethodContext or BlockContext from a frame

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em stack}]the OOP of the whole stack, e.g. SYX\_\-PROCESS\_\-STACK (aProcess). This will not be used if the frame has been detached. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]a new context \end{Desc}


Definition at line 179 of file syx-interp.c.\hypertarget{syx-interp_8c_74bb3b8c0b72fcd2b2d2c7c7bba5f5e2}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-init@{syx\_\-interp\_\-init}}
\index{syx\_\-interp\_\-init@{syx\_\-interp\_\-init}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-interp\_\-init (void)}}
\label{syx-interp_8c_74bb3b8c0b72fcd2b2d2c7c7bba5f5e2}


Initialize the interpreter to be ready to execute processes.

This function is called internally by Syx and should not be called from user applications. 

Definition at line 219 of file syx-interp.c.

Referenced by syx\_\-fetch\_\-basic().\hypertarget{syx-interp_8c_0c2ace1d18e0f3649ca19345bb5a89d5}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-leave\_\-and\_\-answer@{syx\_\-interp\_\-leave\_\-and\_\-answer}}
\index{syx\_\-interp\_\-leave\_\-and\_\-answer@{syx\_\-interp\_\-leave\_\-and\_\-answer}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf syx\_\-bool} syx\_\-interp\_\-leave\_\-and\_\-answer ({\bf SyxOop} {\em return\_\-object}, \/  {\bf syx\_\-bool} {\em use\_\-stack\_\-return})}}
\label{syx-interp_8c_0c2ace1d18e0f3649ca19345bb5a89d5}


Leaves the current frame and push an object into the returning context.

Use the stack return frame use\_\-stack\_\-return is specified, otherwise use the parent frame. Then sets the returned object variable of the process to the specified object. Finally swap the context with the new one. Terminate the process if no valid return frame is found.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em return\_\-object}]the object to be pushed into the returning context \item[{\em use\_\-stack\_\-return}]TRUE to use the stack return frame, FALSE to use the parent frame \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]FALSE if no valid return frame is found \end{Desc}


Definition at line 334 of file syx-interp.c.\hypertarget{syx-interp_8c_41a4fa9a3836e8750667a4134b60835f}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-quit@{syx\_\-interp\_\-quit}}
\index{syx\_\-interp\_\-quit@{syx\_\-interp\_\-quit}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-interp\_\-quit (void)}}
\label{syx-interp_8c_41a4fa9a3836e8750667a4134b60835f}


Finalize the execution of processes and free all the memory used by the interpreter.

This function is called internally by Syx e should not be called from user applications 

Definition at line 229 of file syx-interp.c.

Referenced by syx\_\-quit().\hypertarget{syx-interp_8c_67ca91c8a692283098cb5b9c1da4f7ab}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-interp\_\-swap\_\-context@{syx\_\-interp\_\-swap\_\-context}}
\index{syx\_\-interp\_\-swap\_\-context@{syx\_\-interp\_\-swap\_\-context}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf syx\_\-bool} syx\_\-interp\_\-swap\_\-context ({\bf SyxOop} {\em process}, \/  {\bf SyxOop} {\em context})}}
\label{syx-interp_8c_67ca91c8a692283098cb5b9c1da4f7ab}


Swap the current context with the given one. The context must be already existing in the process stack.

\begin{Desc}
\item[Returns:]FALSE if the context was syx\_\-nil \end{Desc}


Definition at line 240 of file syx-interp.c.\hypertarget{syx-interp_8c_34287a6590d55ee7225b0437a73609b0}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-process\_\-execute\_\-blocking@{syx\_\-process\_\-execute\_\-blocking}}
\index{syx\_\-process\_\-execute\_\-blocking@{syx\_\-process\_\-execute\_\-blocking}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-process\_\-execute\_\-blocking ({\bf SyxOop} {\em process})}}
\label{syx-interp_8c_34287a6590d55ee7225b0437a73609b0}


Same as syx\_\-process\_\-execute\_\-scheduled but does not take care about the byteslice counter, and control is not yield until the process is terminated. 

Definition at line 390 of file syx-interp.c.

Referenced by syx\_\-build\_\-basic(), syx\_\-do\_\-it\_\-blocking(), syx\_\-file\_\-in\_\-blocking(), syx\_\-initialize\_\-system(), syx\_\-memory\_\-clear(), syx\_\-object\_\-free(), syx\_\-object\_\-initialize(), and syx\_\-signal().\hypertarget{syx-interp_8c_86764c60b013f2d11406a06ef5703735}{
\index{syx-interp.c@{syx-interp.c}!syx\_\-process\_\-execute\_\-scheduled@{syx\_\-process\_\-execute\_\-scheduled}}
\index{syx\_\-process\_\-execute\_\-scheduled@{syx\_\-process\_\-execute\_\-scheduled}!syx-interp.c@{syx-interp.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void syx\_\-process\_\-execute\_\-scheduled ({\bf SyxOop} {\em process})}}
\label{syx-interp_8c_86764c60b013f2d11406a06ef5703735}


Executes the given process and returns once the byteslice is reached, no more instructions left or yield has been requested.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em process}]must not be nil \end{description}
\end{Desc}


Definition at line 368 of file syx-interp.c.

Referenced by syx\_\-scheduler\_\-iterate(), and syx\_\-scheduler\_\-run().