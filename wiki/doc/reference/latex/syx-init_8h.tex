\hypertarget{syx-init_8h}{
\section{syx/syx-init.h File Reference}
\label{syx-init_8h}\index{syx/syx-init.h@{syx/syx-init.h}}
}
{\tt \#include \char`\"{}syx-platform.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-types.h\char`\"{}}\par
{\tt \#include \char`\"{}syx-object.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define \hyperlink{syx-init_8h_27a70994157f8571e2c0dd4ee513ab3c}{SYX\_\-INIT\_\-MEMORY\_\-SIZE}~100000
\item 
\#define \hyperlink{syx-init_8h_2e08350ba0b87b6e6e85b21b23fde2c8}{syx\_\-globals\_\-at}(name)~(syx\_\-dictionary\_\-at\_\-symbol (\hyperlink{syx-object_8h_c285844af2007d5ac653de1a0dfb7524}{syx\_\-globals}, (\hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol})(name)))
\item 
\#define \hyperlink{syx-init_8h_10821da1be539c181bf05ea3089a62b5}{syx\_\-globals\_\-at\_\-if\_\-absent}(name, object)
\item 
\#define \hyperlink{syx-init_8h_f23cd621d758fbfffe13f58928e4b068}{syx\_\-globals\_\-at\_\-put}(symbol, value)~(syx\_\-dictionary\_\-at\_\-symbol\_\-put (\hyperlink{syx-object_8h_c285844af2007d5ac653de1a0dfb7524}{syx\_\-globals}, (symbol), (value)))
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-init_8h_8d6c7488dbeffcee4690492bdd2f3a91}{syx\_\-init} (\hyperlink{syx-types_8h_18e1a1417591a1efb670b97ce320f535}{syx\_\-varsize} argc, \hyperlink{syx-types_8h_1bff1fd86072dd98849437bc9dcb35c3}{syx\_\-string} $\ast$argv, \hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} root\_\-path)
\item 
EXPORT void \hyperlink{syx-init_8h_ce263c15141e6de68d951cfc57d672cb}{syx\_\-quit} (void)
\item 
EXPORT void \hyperlink{syx-init_8h_31c41be993642afd482b099c468212d7}{syx\_\-build\_\-basic} (void)
\item 
EXPORT void \hyperlink{syx-init_8h_c06c3bb03991f52f068cee7e52ff868e}{syx\_\-fetch\_\-basic} (void)
\item 
EXPORT void \hyperlink{syx-init_8h_05223a080e6d39766c81442245d6bf37}{syx\_\-initialize\_\-system} (void)
\item 
EXPORT \hyperlink{syx-types_8h_1bff1fd86072dd98849437bc9dcb35c3}{syx\_\-string} \hyperlink{syx-init_8h_43bb2f31e76b9593fb55491d90da7671}{syx\_\-find\_\-file} (\hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} domain, \hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} package, \hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} filename)
\item 
EXPORT \hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} \hyperlink{syx-init_8h_c0d78d41f79e4707e3406d10734fc441}{syx\_\-get\_\-root\_\-path} (void)
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-init_8h_26e334bd4520a346fe829903993f250e}{syx\_\-set\_\-root\_\-path} (\hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} root\_\-path)
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-init_8h_e2d4b8ca450daf0766f0ce2e1ce73c54}{syx\_\-set\_\-image\_\-path} (\hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} image\_\-path)
\item 
EXPORT \hyperlink{syx-types_8h_9663af54b7b72f5d8be5f754ef356525}{syx\_\-symbol} \hyperlink{syx-init_8h_e7f1ad973d8e6155ee3761cac438111f}{syx\_\-get\_\-image\_\-path} (void)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
EXPORT \hyperlink{syx-types_8h_c6dc09b276b99fa1956364359139daab}{syx\_\-bool} \hyperlink{syx-init_8h_532ac7708947b6d7d89531593bc54492}{syx\_\-system\_\-initialized}
\end{CompactItemize}


\subsection{Define Documentation}
\hypertarget{syx-init_8h_2e08350ba0b87b6e6e85b21b23fde2c8}{
\index{syx-init.h@{syx-init.h}!syx\_\-globals\_\-at@{syx\_\-globals\_\-at}}
\index{syx\_\-globals\_\-at@{syx\_\-globals\_\-at}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define syx\_\-globals\_\-at(name)~(syx\_\-dictionary\_\-at\_\-symbol ({\bf syx\_\-globals}, ({\bf syx\_\-symbol})(name)))}}
\label{syx-init_8h_2e08350ba0b87b6e6e85b21b23fde2c8}


Looks up a symbol from the Smalltalk dictionary. Raises an error if not found 

Definition at line 52 of file syx-init.h.

Referenced by syx\_\-build\_\-basic(), syx\_\-cold\_\-parse\_\-methods(), syx\_\-fetch\_\-basic(), syx\_\-file\_\-in\_\-blocking(), syx\_\-memory\_\-load\_\-image(), syx\_\-memory\_\-save\_\-image(), syx\_\-semaphore\_\-new(), and syx\_\-signal\_\-init().\hypertarget{syx-init_8h_10821da1be539c181bf05ea3089a62b5}{
\index{syx-init.h@{syx-init.h}!syx\_\-globals\_\-at\_\-if\_\-absent@{syx\_\-globals\_\-at\_\-if\_\-absent}}
\index{syx\_\-globals\_\-at\_\-if\_\-absent@{syx\_\-globals\_\-at\_\-if\_\-absent}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define syx\_\-globals\_\-at\_\-if\_\-absent(name, \/  object)}}
\label{syx-init_8h_10821da1be539c181bf05ea3089a62b5}


\textbf{Value:}

\begin{Code}\begin{verbatim}(syx_dictionary_at_symbol_if_absent (syx_globals, \
                                                                                   (syx_symbol)(name), \
                                                                                   object))
\end{verbatim}
\end{Code}
Looks up a symbol from the Smalltalk dictionary and return a given SyxOop if not found 

Definition at line 54 of file syx-init.h.

Referenced by syx\_\-scheduler\_\-init().\hypertarget{syx-init_8h_f23cd621d758fbfffe13f58928e4b068}{
\index{syx-init.h@{syx-init.h}!syx\_\-globals\_\-at\_\-put@{syx\_\-globals\_\-at\_\-put}}
\index{syx\_\-globals\_\-at\_\-put@{syx\_\-globals\_\-at\_\-put}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define syx\_\-globals\_\-at\_\-put(symbol, \/  value)~(syx\_\-dictionary\_\-at\_\-symbol\_\-put ({\bf syx\_\-globals}, (symbol), (value)))}}
\label{syx-init_8h_f23cd621d758fbfffe13f58928e4b068}


Insert a SyxOop into the Smalltalk dictionary 

Definition at line 59 of file syx-init.h.

Referenced by syx\_\-build\_\-basic(), syx\_\-fetch\_\-basic(), and syx\_\-scheduler\_\-init().\hypertarget{syx-init_8h_27a70994157f8571e2c0dd4ee513ab3c}{
\index{syx-init.h@{syx-init.h}!SYX\_\-INIT\_\-MEMORY\_\-SIZE@{SYX\_\-INIT\_\-MEMORY\_\-SIZE}}
\index{SYX\_\-INIT\_\-MEMORY\_\-SIZE@{SYX\_\-INIT\_\-MEMORY\_\-SIZE}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SYX\_\-INIT\_\-MEMORY\_\-SIZE~100000}}
\label{syx-init_8h_27a70994157f8571e2c0dd4ee513ab3c}


Default initial memory size 

Definition at line 35 of file syx-init.h.

Referenced by syx\_\-build\_\-basic().

\subsection{Function Documentation}
\hypertarget{syx-init_8h_31c41be993642afd482b099c468212d7}{
\index{syx-init.h@{syx-init.h}!syx\_\-build\_\-basic@{syx\_\-build\_\-basic}}
\index{syx\_\-build\_\-basic@{syx\_\-build\_\-basic}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-build\_\-basic (void)}}
\label{syx-init_8h_31c41be993642afd482b099c468212d7}


Builds a basic running image from scratch.

This functions first reinitialize the memory with the size defined in SYX\_\-INIT\_\-MEMORY\_\-SIZE. After, creates the 3 common constants syx\_\-nil, syx\_\-true and syx\_\-false. Then creates all the classes needed by the VM, the Smalltalk dictionary and a dictionary containing all the symbols. Sets up the basic object hierarchy and insert each class into Smalltalk. Ends up this process by fileing in the basic declarations from initialDecl.st and the other $\ast$.st files, and calls syx\_\-fetch\_\-basic to fetch all classes in the VM. Finally, prepares the environment by running a blocking Process that calls Smalltalk$>$$>$initializeFirstSystem and initialize everything else from within Smalltalk itself. 

Definition at line 183 of file syx-init.c.\hypertarget{syx-init_8h_c06c3bb03991f52f068cee7e52ff868e}{
\index{syx-init.h@{syx-init.h}!syx\_\-fetch\_\-basic@{syx\_\-fetch\_\-basic}}
\index{syx\_\-fetch\_\-basic@{syx\_\-fetch\_\-basic}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-fetch\_\-basic (void)}}
\label{syx-init_8h_c06c3bb03991f52f068cee7e52ff868e}




Definition at line 278 of file syx-init.c.

Referenced by syx\_\-build\_\-basic(), and syx\_\-memory\_\-load\_\-image().\hypertarget{syx-init_8h_43bb2f31e76b9593fb55491d90da7671}{
\index{syx-init.h@{syx-init.h}!syx\_\-find\_\-file@{syx\_\-find\_\-file}}
\index{syx\_\-find\_\-file@{syx\_\-find\_\-file}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-string} syx\_\-find\_\-file ({\bf syx\_\-symbol} {\em domain}, \/  {\bf syx\_\-symbol} {\em package}, \/  {\bf syx\_\-symbol} {\em filename})}}
\label{syx-init_8h_43bb2f31e76b9593fb55491d90da7671}


Creates a file path inside the Syx environment

For example if you want a Smalltalk file of a package, specify the domain \char`\"{}st\char`\"{}, the package name and the file name. 

Definition at line 77 of file syx-init.c.\hypertarget{syx-init_8h_e7f1ad973d8e6155ee3761cac438111f}{
\index{syx-init.h@{syx-init.h}!syx\_\-get\_\-image\_\-path@{syx\_\-get\_\-image\_\-path}}
\index{syx\_\-get\_\-image\_\-path@{syx\_\-get\_\-image\_\-path}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-symbol} syx\_\-get\_\-image\_\-path (void)}}
\label{syx-init_8h_e7f1ad973d8e6155ee3761cac438111f}


Returns the initial image path.

This path won't be used once Syx is initialized. The image path will be obtained from the ImageFileName global 

Definition at line 481 of file syx-init.c.

Referenced by syx\_\-memory\_\-load\_\-image().\hypertarget{syx-init_8h_c0d78d41f79e4707e3406d10734fc441}{
\index{syx-init.h@{syx-init.h}!syx\_\-get\_\-root\_\-path@{syx\_\-get\_\-root\_\-path}}
\index{syx\_\-get\_\-root\_\-path@{syx\_\-get\_\-root\_\-path}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-symbol} syx\_\-get\_\-root\_\-path (void)}}
\label{syx-init_8h_c0d78d41f79e4707e3406d10734fc441}


Returns the root directory of Syx.

\begin{Desc}
\item[Returns:]a constant string containing the path of the root directory \end{Desc}


Definition at line 424 of file syx-init.c.\hypertarget{syx-init_8h_8d6c7488dbeffcee4690492bdd2f3a91}{
\index{syx-init.h@{syx-init.h}!syx\_\-init@{syx\_\-init}}
\index{syx\_\-init@{syx\_\-init}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} syx\_\-init ({\bf syx\_\-varsize} {\em argc}, \/  {\bf syx\_\-string} $\ast$ {\em argv}, \/  {\bf syx\_\-symbol} {\em root\_\-path})}}
\label{syx-init_8h_8d6c7488dbeffcee4690492bdd2f3a91}


Setup the basic external environment of Syx, such as the root and the image path.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em root\_\-path}]an arbitrary root directory for Syx or NULL \end{description}
\end{Desc}


Definition at line 347 of file syx-init.c.\hypertarget{syx-init_8h_05223a080e6d39766c81442245d6bf37}{
\index{syx-init.h@{syx-init.h}!syx\_\-initialize\_\-system@{syx\_\-initialize\_\-system}}
\index{syx\_\-initialize\_\-system@{syx\_\-initialize\_\-system}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-initialize\_\-system (void)}}
\label{syx-init_8h_05223a080e6d39766c81442245d6bf37}


Remove Smalltalk startupProcess from being scheduled and send startupSystem: to Smalltalk in a scheduled process 

Definition at line 318 of file syx-init.c.

Referenced by syx\_\-memory\_\-load\_\-image().\hypertarget{syx-init_8h_ce263c15141e6de68d951cfc57d672cb}{
\index{syx-init.h@{syx-init.h}!syx\_\-quit@{syx\_\-quit}}
\index{syx\_\-quit@{syx\_\-quit}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT void syx\_\-quit (void)}}
\label{syx-init_8h_ce263c15141e6de68d951cfc57d672cb}


Finalize Syx.

Run special tasks to finalize the Syx process, such as clearing all the allocated memory 

Definition at line 404 of file syx-init.c.\hypertarget{syx-init_8h_e2d4b8ca450daf0766f0ce2e1ce73c54}{
\index{syx-init.h@{syx-init.h}!syx\_\-set\_\-image\_\-path@{syx\_\-set\_\-image\_\-path}}
\index{syx\_\-set\_\-image\_\-path@{syx\_\-set\_\-image\_\-path}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} syx\_\-set\_\-image\_\-path ({\bf syx\_\-symbol} {\em image\_\-path})}}
\label{syx-init_8h_e2d4b8ca450daf0766f0ce2e1ce73c54}


Sets the initial image path 

Definition at line 463 of file syx-init.c.\hypertarget{syx-init_8h_26e334bd4520a346fe829903993f250e}{
\index{syx-init.h@{syx-init.h}!syx\_\-set\_\-root\_\-path@{syx\_\-set\_\-root\_\-path}}
\index{syx\_\-set\_\-root\_\-path@{syx\_\-set\_\-root\_\-path}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} syx\_\-set\_\-root\_\-path ({\bf syx\_\-symbol} {\em root\_\-path})}}
\label{syx-init_8h_26e334bd4520a346fe829903993f250e}


Sets the root directory of Syx.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em root\_\-path}]the new path \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if the path exists and is readable \end{Desc}


Definition at line 436 of file syx-init.c.

Referenced by syx\_\-init().

\subsection{Variable Documentation}
\hypertarget{syx-init_8h_532ac7708947b6d7d89531593bc54492}{
\index{syx-init.h@{syx-init.h}!syx\_\-system\_\-initialized@{syx\_\-system\_\-initialized}}
\index{syx\_\-system\_\-initialized@{syx\_\-system\_\-initialized}!syx-init.h@{syx-init.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}EXPORT {\bf syx\_\-bool} {\bf syx\_\-system\_\-initialized}}}
\label{syx-init_8h_532ac7708947b6d7d89531593bc54492}




Definition at line 59 of file syx-init.c.

Referenced by syx\_\-initialize\_\-system(), syx\_\-object\_\-initialize(), and syx\_\-signal().