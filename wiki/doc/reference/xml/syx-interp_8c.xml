<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.5.5">
  <compounddef id="syx-interp_8c" kind="file">
    <compoundname>syx-interp.c</compoundname>
    <includes refid="syx-object_8h" local="yes">syx-object.h</includes>
    <includes refid="syx-interp_8h" local="yes">syx-interp.h</includes>
    <includes refid="syx-utils_8h" local="yes">syx-utils.h</includes>
    <includes refid="syx-scheduler_8h" local="yes">syx-scheduler.h</includes>
    <includes refid="syx-init_8h" local="yes">syx-init.h</includes>
    <includes refid="syx-plugins_8h" local="yes">syx-plugins.h</includes>
    <includes refid="syx-memory_8h" local="yes">syx-memory.h</includes>
    <includes refid="syx-bytecode_8h" local="yes">syx-bytecode.h</includes>
    <includes refid="syx-error_8h" local="yes">syx-error.h</includes>
    <includes refid="syx-profile_8h" local="yes">syx-profile.h</includes>
    <includes local="no">assert.h</includes>
    <incdepgraph>
      <node id="223">
        <label>syx-types.h</label>
        <link refid="syx-types_8h"/>
        <childnode refid="220" relation="include">
        </childnode>
        <childnode refid="224" relation="include">
        </childnode>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="225" relation="include">
        </childnode>
        <childnode refid="226" relation="include">
        </childnode>
        <childnode refid="227" relation="include">
        </childnode>
        <childnode refid="228" relation="include">
        </childnode>
        <childnode refid="229" relation="include">
        </childnode>
        <childnode refid="230" relation="include">
        </childnode>
      </node>
      <node id="222">
        <label>stdarg.h</label>
      </node>
      <node id="231">
        <label>syx-lexer.h</label>
        <link refid="syx-lexer_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="224" relation="include">
        </childnode>
        <childnode refid="232" relation="include">
        </childnode>
      </node>
      <node id="239">
        <label>syx-bytecode.h</label>
        <link refid="syx-bytecode_8h"/>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="217" relation="include">
        </childnode>
        <childnode refid="238" relation="include">
        </childnode>
      </node>
      <node id="236">
        <label>syx-scheduler.h</label>
        <link refid="syx-scheduler_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="217" relation="include">
        </childnode>
        <childnode refid="228" relation="include">
        </childnode>
      </node>
      <node id="241">
        <label>assert.h</label>
      </node>
      <node id="226">
        <label>stdint.h</label>
      </node>
      <node id="229">
        <label>stdlib.h</label>
      </node>
      <node id="240">
        <label>syx-profile.h</label>
        <link refid="syx-profile_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
      </node>
      <node id="233">
        <label>syx-error.h</label>
        <link refid="syx-error_8h"/>
        <childnode refid="228" relation="include">
        </childnode>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="220" relation="include">
        </childnode>
        <childnode refid="218" relation="include">
        </childnode>
        <childnode refid="222" relation="include">
        </childnode>
      </node>
      <node id="225">
        <label>limits.h</label>
      </node>
      <node id="216">
        <label>syx/syx-interp.c</label>
        <link refid="syx-interp.c"/>
        <childnode refid="217" relation="include">
        </childnode>
        <childnode refid="235" relation="include">
        </childnode>
        <childnode refid="218" relation="include">
        </childnode>
        <childnode refid="236" relation="include">
        </childnode>
        <childnode refid="234" relation="include">
        </childnode>
        <childnode refid="237" relation="include">
        </childnode>
        <childnode refid="238" relation="include">
        </childnode>
        <childnode refid="239" relation="include">
        </childnode>
        <childnode refid="233" relation="include">
        </childnode>
        <childnode refid="240" relation="include">
        </childnode>
        <childnode refid="241" relation="include">
        </childnode>
      </node>
      <node id="235">
        <label>syx-interp.h</label>
        <link refid="syx-interp_8h"/>
        <childnode refid="217" relation="include">
        </childnode>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="236" relation="include">
        </childnode>
        <childnode refid="234" relation="include">
        </childnode>
      </node>
      <node id="217">
        <label>syx-object.h</label>
        <link refid="syx-object_8h"/>
        <childnode refid="218" relation="include">
        </childnode>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="224" relation="include">
        </childnode>
        <childnode refid="233" relation="include">
        </childnode>
        <childnode refid="234" relation="include">
        </childnode>
        <childnode refid="229" relation="include">
        </childnode>
        <childnode refid="230" relation="include">
        </childnode>
        <childnode refid="232" relation="include">
        </childnode>
      </node>
      <node id="227">
        <label>wchar.h</label>
      </node>
      <node id="230">
        <label>string.h</label>
      </node>
      <node id="218">
        <label>syx-utils.h</label>
        <link refid="syx-utils_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="222" relation="include">
        </childnode>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="231" relation="include">
        </childnode>
      </node>
      <node id="238">
        <label>syx-memory.h</label>
        <link refid="syx-memory_8h"/>
        <childnode refid="220" relation="include">
        </childnode>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="217" relation="include">
        </childnode>
        <childnode refid="234" relation="include">
        </childnode>
      </node>
      <node id="221">
        <label>byteswap.h</label>
      </node>
      <node id="234">
        <label>syx-init.h</label>
        <link refid="syx-init_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="223" relation="include">
        </childnode>
        <childnode refid="217" relation="include">
        </childnode>
      </node>
      <node id="220">
        <label>syx-config.h</label>
      </node>
      <node id="232">
        <label>gmp.h</label>
      </node>
      <node id="224">
        <label>syx-enums.h</label>
        <link refid="syx-enums_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
      </node>
      <node id="219">
        <label>syx-platform.h</label>
        <link refid="syx-platform_8h"/>
        <childnode refid="220" relation="include">
        </childnode>
        <childnode refid="221" relation="include">
        </childnode>
      </node>
      <node id="237">
        <label>syx-plugins.h</label>
        <link refid="syx-plugins_8h"/>
        <childnode refid="219" relation="include">
        </childnode>
        <childnode refid="235" relation="include">
        </childnode>
      </node>
      <node id="228">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="syx-interp_8c_14c398e80542fd22ab4ad16262a2d1bd1" prot="public" static="yes" mutable="no">
        <type><ref refid="syx-interp_8h_117bf8fdae73c510d8e75076664ce9e4b" kindref="member">SyxInterpreterFunc</ref></type>
        <definition>SyxInterpreterFunc handlers[]</definition>
        <argsstring>[]</argsstring>
        <name>handlers</name>
        <initializer>
  {
    syx_interp_push_instance,
    syx_interp_push_argument,
    syx_interp_push_temporary,
    syx_interp_push_literal,
    syx_interp_push_constant,
    syx_interp_push_binding_variable,
    syx_interp_push_array,
    syx_interp_push_block_closure,

    syx_interp_assign_instance,
    syx_interp_assign_temporary,
    syx_interp_assign_binding_variable,

    syx_interp_mark_arguments,
    syx_interp_send_message,
    syx_interp_send_super,
    syx_interp_send_unary,
    syx_interp_send_binary,

    syx_interp_do_special,
    syx_interp_do_extended
  }</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="453" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="430" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="syx-interp_8c_12fe6a5f292ce5d9ab3103878b6d3d7cf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref> *</type>
        <definition>SyxInterpFrame* syx_interp_context_to_frame</definition>
        <argsstring>(SyxOop context)</argsstring>
        <name>syx_interp_context_to_frame</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>context</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns the frame associated to the given context </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="166" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="165" bodyend="171"/>
        <referencedby refid="syx-interp_8h_1aaa4ae62114dedc402940a51711c5c14" compoundref="syx-interp_8c" startline="240" endline="263">syx_interp_swap_context</referencedby>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_1f8844c877ec9281208ea602d73880c0f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
        <definition>SyxOop syx_interp_frame_to_context</definition>
        <argsstring>(SyxOop stack, SyxInterpFrame *frame)</argsstring>
        <name>syx_interp_frame_to_context</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>stack</declname>
        </param>
        <param>
          <type><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref> *</type>
          <declname>frame</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Creates a MethodContext or BlockContext from a frame</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stack</parametername>
</parameternamelist>
<parameterdescription>
<para>the OOP of the whole stack, e.g. SYX_PROCESS_STACK (aProcess). This will not be used if the frame has been detached. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>a new context </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="180" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="179" bodyend="211"/>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_174bb3b8c0b72fcd2b2d2c7c7bba5f5e2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void syx_interp_init</definition>
        <argsstring>(void)</argsstring>
        <name>syx_interp_init</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Initialize the interpreter to be ready to execute processes.</para><para>This function is called internally by Syx and should not be called from user applications. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="220" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="219" bodyend="221"/>
        <referencedby refid="syx-init_8h_1c06c3bb03991f52f068cee7e52ff868e" compoundref="syx-init_8c" startline="278" endline="313">syx_fetch_basic</referencedby>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_141a4fa9a3836e8750667a4134b60835f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void syx_interp_quit</definition>
        <argsstring>(void)</argsstring>
        <name>syx_interp_quit</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Finalize the execution of processes and free all the memory used by the interpreter.</para><para>This function is called internally by Syx e should not be called from user applications </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="230" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="229" bodyend="231"/>
        <referencedby refid="syx-init_8h_1ce263c15141e6de68d951cfc57d672cb" compoundref="syx-init_8c" startline="404" endline="416">syx_quit</referencedby>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_167ca91c8a692283098cb5b9c1da4f7ab" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></type>
        <definition>syx_bool syx_interp_swap_context</definition>
        <argsstring>(SyxOop process, SyxOop context)</argsstring>
        <name>syx_interp_swap_context</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>process</declname>
        </param>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>context</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Swap the current context with the given one. The context must be already existing in the process stack.</para><para><simplesect kind="return"><para>FALSE if the context was syx_nil </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="241" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="240" bodyend="263"/>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_1e483ac8c92a367fc44460969715106d9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></type>
        <definition>syx_bool syx_interp_enter_context</definition>
        <argsstring>(SyxOop process, SyxOop context)</argsstring>
        <name>syx_interp_enter_context</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>process</declname>
        </param>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>context</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Enters a new MethodContext or BlockContext.</para><para><simplesect kind="return"><para>FALSE if the context was syx_nil </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="272" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="271" bodyend="320"/>
        <referencedby refid="syx-init_8h_131c41be993642afd482b099c468212d7" compoundref="syx-init_8c" startline="183" endline="267">syx_build_basic</referencedby>
        <referencedby refid="syx-utils_8h_1c6b5dd77f43dc814af8ac022d9cd81d7" compoundref="syx-utils_8c" startline="560" endline="570">syx_do_it_blocking</referencedby>
        <referencedby refid="syx-utils_8h_1fa9f19b7a2fc29dc3b06a5d21e894040" compoundref="syx-utils_8c" startline="539" endline="551">syx_file_in_blocking</referencedby>
        <referencedby refid="syx-init_8h_105223a080e6d39766c81442245d6bf37" compoundref="syx-init_8c" startline="318" endline="339">syx_initialize_system</referencedby>
        <referencedby refid="syx-memory_8h_1cbf4870c020690e41fd38b02adfdd62e" compoundref="syx-memory_8c" startline="142" endline="179">syx_memory_clear</referencedby>
        <referencedby refid="syx-object_8h_11183dd2393eabdaf754948e182dcb287" compoundref="syx-object_8c" startline="814" endline="837">syx_object_free</referencedby>
        <referencedby refid="syx-object_8h_100a861ab5f7d7224796beb8f9bf42296" compoundref="syx-object_8c" startline="95" endline="108">syx_object_initialize</referencedby>
        <referencedby refid="syx-error_8h_19e42294f55fa2b19c5bd23202111d7e2" compoundref="syx-error_8c" startline="125" endline="159">syx_signal</referencedby>
        <referencedby refid="syx-error_8h_123779d3e58bbb0dcbaa8af8e77b919da" compoundref="syx-error_8c" startline="191" endline="197">syx_signal_does_not_understand</referencedby>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_10c2ace1d18e0f3649ca19345bb5a89d5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></type>
        <definition>syx_bool syx_interp_leave_and_answer</definition>
        <argsstring>(SyxOop return_object, syx_bool use_stack_return)</argsstring>
        <name>syx_interp_leave_and_answer</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>return_object</declname>
        </param>
        <param>
          <type><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></type>
          <declname>use_stack_return</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Leaves the current frame and push an object into the returning context.</para><para>Use the stack return frame use_stack_return is specified, otherwise use the parent frame. Then sets the returned object variable of the process to the specified object. Finally swap the context with the new one. Terminate the process if no valid return frame is found.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>return_object</parametername>
</parameternamelist>
<parameterdescription>
<para>the object to be pushed into the returning context </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>use_stack_return</parametername>
</parameternamelist>
<parameterdescription>
<para>TRUE to use the stack return frame, FALSE to use the parent frame </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>FALSE if no valid return frame is found </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="335" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="334" bodyend="359"/>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_186764c60b013f2d11406a06ef5703735" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void syx_process_execute_scheduled</definition>
        <argsstring>(SyxOop process)</argsstring>
        <name>syx_process_execute_scheduled</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>process</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Executes the given process and returns once the byteslice is reached, no more instructions left or yield has been requested.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>process</parametername>
</parameternamelist>
<parameterdescription>
<para>must not be nil </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="369" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="368" bodyend="384"/>
        <referencedby refid="syx-scheduler_8h_117fade7b245e355201d773d0ba2286e0" compoundref="syx-scheduler_8c" startline="118" endline="128">syx_scheduler_iterate</referencedby>
        <referencedby refid="syx-scheduler_8h_125f4d9193e601faf10f5937fb7c6b32e" compoundref="syx-scheduler_8c" startline="132" endline="156">syx_scheduler_run</referencedby>
      </memberdef>
      <memberdef kind="function" id="syx-interp_8c_134287a6590d55ee7225b0437a73609b0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void syx_process_execute_blocking</definition>
        <argsstring>(SyxOop process)</argsstring>
        <name>syx_process_execute_blocking</name>
        <param>
          <type><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></type>
          <declname>process</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Same as syx_process_execute_scheduled but does not take care about the byteslice counter, and control is not yield until the process is terminated. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/media/common/projects/syx/syx/syx-interp.c" line="391" bodyfile="/media/common/projects/syx/syx/syx-interp.c" bodystart="390" bodyend="425"/>
        <referencedby refid="syx-init_8h_131c41be993642afd482b099c468212d7" compoundref="syx-init_8c" startline="183" endline="267">syx_build_basic</referencedby>
        <referencedby refid="syx-utils_8h_1c6b5dd77f43dc814af8ac022d9cd81d7" compoundref="syx-utils_8c" startline="560" endline="570">syx_do_it_blocking</referencedby>
        <referencedby refid="syx-utils_8h_1fa9f19b7a2fc29dc3b06a5d21e894040" compoundref="syx-utils_8c" startline="539" endline="551">syx_file_in_blocking</referencedby>
        <referencedby refid="syx-init_8h_105223a080e6d39766c81442245d6bf37" compoundref="syx-init_8c" startline="318" endline="339">syx_initialize_system</referencedby>
        <referencedby refid="syx-memory_8h_1cbf4870c020690e41fd38b02adfdd62e" compoundref="syx-memory_8c" startline="142" endline="179">syx_memory_clear</referencedby>
        <referencedby refid="syx-object_8h_11183dd2393eabdaf754948e182dcb287" compoundref="syx-object_8c" startline="814" endline="837">syx_object_free</referencedby>
        <referencedby refid="syx-object_8h_100a861ab5f7d7224796beb8f9bf42296" compoundref="syx-object_8c" startline="95" endline="108">syx_object_initialize</referencedby>
        <referencedby refid="syx-error_8h_19e42294f55fa2b19c5bd23202111d7e2" compoundref="syx-error_8c" startline="125" endline="159">syx_signal</referencedby>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/></highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/><sp/><sp/>Copyright<sp/>(c)<sp/>2007-2008<sp/>Luca<sp/>Bruno</highlight></codeline>
<codeline lineno="3"><highlight class="comment"></highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/><sp/><sp/>This<sp/>file<sp/>is<sp/>part<sp/>of<sp/>Smalltalk<sp/>YX.</highlight></codeline>
<codeline lineno="5"><highlight class="comment"></highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/><sp/><sp/>Permission<sp/>is<sp/>hereby<sp/>granted,<sp/>free<sp/>of<sp/>charge,<sp/>to<sp/>any<sp/>person<sp/>obtaining<sp/>a<sp/>copy</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/><sp/><sp/>of<sp/>this<sp/>software<sp/>and<sp/>associated<sp/>documentation<sp/>files<sp/>(the<sp/>&quot;Software&quot;),<sp/>to<sp/>deal</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/><sp/><sp/>in<sp/>the<sp/>Software<sp/>without<sp/>restriction,<sp/>including<sp/>without<sp/>limitation<sp/>the<sp/>rights</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/><sp/><sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>merge,<sp/>publish,<sp/>distribute,<sp/>sublicense,<sp/>and/or<sp/>sell<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/><sp/><sp/>copies<sp/>of<sp/>the<sp/>Software,<sp/>and<sp/>to<sp/>permit<sp/>persons<sp/>to<sp/>whom<sp/>the<sp/>Software<sp/>is</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/><sp/><sp/>furnished<sp/>to<sp/>do<sp/>so,<sp/>subject<sp/>to<sp/>the<sp/>following<sp/>conditions:</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/><sp/><sp/>The<sp/>above<sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>shall<sp/>be<sp/>included<sp/>in</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/><sp/><sp/>all<sp/>copies<sp/>or<sp/>substantial<sp/>portions<sp/>of<sp/>the<sp/>Software.</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/><sp/><sp/>THE<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;,<sp/>WITHOUT<sp/>WARRANTY<sp/>OF<sp/>ANY<sp/>KIND,<sp/>EXPRESS<sp/>OR</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/><sp/><sp/>IMPLIED,<sp/>INCLUDING<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO<sp/>THE<sp/>WARRANTIES<sp/>OF<sp/>MERCHANTABILITY,<sp/><sp/></highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/><sp/><sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>AND<sp/>NONINFRINGEMENT.<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/><sp/><sp/>AUTHORS<sp/>OR<sp/>COPYRIGHT<sp/>HOLDERS<sp/>BE<sp/>LIABLE<sp/>FOR<sp/>ANY<sp/>CLAIM,<sp/>DAMAGES<sp/>OR<sp/>OTHER</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/><sp/><sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>AN<sp/>ACTION<sp/>OF<sp/>CONTRACT,<sp/>TORT<sp/>OR<sp/>OTHERWISE,<sp/>ARISING</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/><sp/><sp/>FROM,<sp/>OUT<sp/>OF<sp/>OR<sp/>IN<sp/>CONNECTION<sp/>WITH<sp/>THE<sp/>SOFTWARE<sp/>OR<sp/>THE<sp/>USE<sp/>OR<sp/>OTHER<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/><sp/><sp/>DEALINGS<sp/>IN<sp/>THE<sp/>SOFTWARE.</highlight></codeline>
<codeline lineno="23"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-object_8h" kindref="compound">syx-object.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-interp_8h" kindref="compound">syx-interp.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-utils_8h" kindref="compound">syx-utils.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-scheduler_8h" kindref="compound">syx-scheduler.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-init_8h" kindref="compound">syx-init.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-plugins_8h" kindref="compound">syx-plugins.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-memory_8h" kindref="compound">syx-memory.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-bytecode_8h" kindref="compound">syx-bytecode.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-error_8h" kindref="compound">syx-error.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="syx-profile_8h" kindref="compound">syx-profile.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;assert.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_FULL</highlight></codeline>
<codeline lineno="48"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SYX_DEBUG_CONTEXT</highlight></codeline>
<codeline lineno="50"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="51"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>SYX_DEBUG_TRACE_IP</highlight></codeline>
<codeline lineno="52"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>SYX_DEBUG_FULL<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_SYX_INTERP_IN_BLOCK<sp/>(_syx_interp_state.frame-&gt;outer_frame<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="56"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>_syx_interp_state<sp/>=<sp/><ref refid="syx-interp_8h_136ed8b83722f6b5db96c921d75914c8b" kindref="member">SYX_INTERP_STATE_NEW</ref>;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_CONTEXT</highlight></codeline>
<codeline lineno="60"><highlight class="preprocessor"></highlight><highlight class="normal"><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>_frame_depth;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="62"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>_syx_interp_get_next_byte<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref><sp/>_syx_interp_execute_byte<sp/>(<ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>byte);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal">_syx_interp_save_process_state<sp/>(<ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state)</highlight></codeline>
<codeline lineno="69"><highlight class="normal">{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1c49eda7223af44f10a46c7be40bc3fac" kindref="member">SYX_PROCESS_FRAME_POINTER</ref>(state-&gt;<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref>)<sp/>=<sp/><ref refid="syx-types_8h_18efde12e307dd616a32f42327b3e80cc" kindref="member">SYX_POINTER_CAST_OOP</ref><sp/>(state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>);</highlight></codeline>
<codeline lineno="72"><highlight class="normal">}</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Fetches<sp/>and<sp/>updates<sp/>the<sp/>execution<sp/>state<sp/>of<sp/>the<sp/>interpreter<sp/>to<sp/>be<sp/>ready<sp/>for<sp/>next<sp/>instructions<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal">_syx_interp_state_update<sp/>(<ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state,<sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame)</highlight></codeline>
<codeline lineno="77"><highlight class="normal">{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>bytecodes;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>method<sp/>=<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>;;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref><sp/>=<sp/>frame;</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/>bytecodes<sp/>=<sp/><ref refid="syx-object_8h_171157b1d4bedfbd25c8436122ddb24fd" kindref="member">SYX_CODE_BYTECODES</ref><sp/>(method);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_121f99ebbaf71603731cf037118c8c13d" kindref="member">arguments</ref><sp/>=<sp/>&amp;frame-&gt;<ref refid="struct_syx_interp_frame_1f98a9a47dea773894bddcac57c9dddb3" kindref="member">local</ref>;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_1eafb29afefa1d6ff179eb668e4ff5759" kindref="member">temporaries</ref><sp/>=<sp/>state-&gt;<ref refid="struct_syx_interp_state_121f99ebbaf71603731cf037118c8c13d" kindref="member">arguments</ref><sp/>+<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_1b5c4f1e16d1d4ac619621ab96b12d009" kindref="member">SYX_CODE_ARGUMENTS_COUNT</ref><sp/>(method));</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref><sp/>=<sp/><ref refid="syx-object_8h_1fc625eb398e3bd73c520d54112da754f" kindref="member">SYX_OBJECT_DATA</ref><sp/>(<ref refid="syx-object_8h_1b1a48ee5d3b0c5e48a11450c343a0f29" kindref="member">SYX_CODE_LITERALS</ref><sp/>(method));</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_1b33dbca8378dfa3df5a770d07e1c206f" kindref="member">method_bytecodes</ref><sp/>=<sp/>(<ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>*)<ref refid="syx-object_8h_1fc625eb398e3bd73c520d54112da754f" kindref="member">SYX_OBJECT_DATA</ref><sp/>(bytecodes);</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_10c12712f19d50177cd7ace06975da5cd" kindref="member">method_bytecodes_count</ref><sp/>=<sp/><ref refid="syx-object_8h_16739da61250709a86d303df2aa297758" kindref="member">SYX_OBJECT_DATA_SIZE</ref><sp/>(bytecodes);</highlight></codeline>
<codeline lineno="89"><highlight class="normal">}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal">_syx_interp_switch_process<sp/>(<ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state,<sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>process)</highlight></codeline>
<codeline lineno="94"><highlight class="normal">{</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-types_8h_177fa18bf2a99d480c1947546d2f4d3da" kindref="member">SYX_OOP_NE</ref><sp/>(process,<sp/>state-&gt;<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref>))</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame<sp/>=<sp/><ref refid="syx-types_8h_1c1fcc0de09d041e08a21ae518c09037a" kindref="member">SYX_OOP_CAST_POINTER</ref><sp/>(<ref refid="syx-object_8h_1c49eda7223af44f10a46c7be40bc3fac" kindref="member">SYX_PROCESS_FRAME_POINTER</ref><sp/>(process));</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state_update<sp/>(state,<sp/>frame);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref><sp/>=<sp/>process;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_191e90bd79f62f35a5746aef791506acb" kindref="member">byteslice</ref><sp/>=<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-scheduler_8h_1a45ab87994042ea76587b30a1599aee1" kindref="member">syx_processor_byteslice</ref>);</highlight></codeline>
<codeline lineno="105"><highlight class="normal">}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal">_syx_interp_frame_prepare_new<sp/>(<ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state,<sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>method)</highlight></codeline>
<codeline lineno="112"><highlight class="normal">{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*parent_frame;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>temporaries_count;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>parent_frame<sp/>=<sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>we<sp/>need<sp/>the<sp/>next<sp/>position<sp/>of<sp/>our<sp/>frame,<sp/>the<sp/>stack<sp/>pointer<sp/>is<sp/>a<sp/>good<sp/>point<sp/>in<sp/>the<sp/>process<sp/>stack<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/>frame<sp/>=<sp/>(<ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*)parent_frame-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref>;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal">#ifdef<sp/>SYX_DEBUG_CONTEXT</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;CONTEXT<sp/>-<sp/>New<sp/>frame<sp/>%p<sp/>-<sp/>Depth:<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>frame,<sp/>++_frame_depth);</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="124"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref><sp/>=<sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1f3ecaeed999a18d99d3fd27e9450ab41" kindref="member">detached_frame</ref><sp/>=<sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1e1b68af7dec8776cd14b3d1df923409c" kindref="member">parent_frame</ref><sp/>=<sp/>parent_frame;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1da8f1ef4a738fbc3289aad49cf419a6e" kindref="member">stack_return_frame</ref><sp/>=<sp/>parent_frame;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1335377c41e8c70178ad2a5ddf66508b4" kindref="member">outer_frame</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref><sp/>=<sp/>method;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_18b361a6a8c7a7756bd7bf49adb6ebffd" kindref="member">closure</ref><sp/>=<sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/>_syx_interp_state_update<sp/>(state,<sp/>frame);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/>temporaries_count<sp/>=<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_14acfab65c2c72d409325dc662d34dc5b" kindref="member">SYX_CODE_TEMPORARIES_COUNT</ref><sp/>(method));</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref><sp/>=<sp/>state-&gt;<ref refid="struct_syx_interp_state_1eafb29afefa1d6ff179eb668e4ff5759" kindref="member">temporaries</ref><sp/>+<sp/>temporaries_count;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref><sp/>=<sp/>state-&gt;<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/>memcpy<sp/>(state-&gt;<ref refid="struct_syx_interp_state_121f99ebbaf71603731cf037118c8c13d" kindref="member">arguments</ref>,<sp/>state-&gt;<ref refid="struct_syx_interp_state_17f74dc0eca9d27cc7fc5aa7e2a7d3e20" kindref="member">message_arguments</ref>,</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>*<sp/>sizeof<sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref>));</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/>memset<sp/>(state-&gt;<ref refid="struct_syx_interp_state_1eafb29afefa1d6ff179eb668e4ff5759" kindref="member">temporaries</ref>,<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">,<sp/>temporaries_count<sp/>*<sp/>sizeof<sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref>));</highlight></codeline>
<codeline lineno="142"><highlight class="normal">}</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal">_syx_interp_frame_prepare_new_closure<sp/>(<ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state,<sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>closure)</highlight></codeline>
<codeline lineno="149"><highlight class="normal">{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/>_syx_interp_frame_prepare_new<sp/>(state,<sp/><ref refid="syx-object_8h_13b6abd50b74d739d7866ac4a34c9186c" kindref="member">SYX_BLOCK_CLOSURE_BLOCK</ref><sp/>(closure));</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/>frame<sp/>=<sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1335377c41e8c70178ad2a5ddf66508b4" kindref="member">outer_frame</ref><sp/>=<sp/>(<ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*)<ref refid="syx-object_8h_1fc625eb398e3bd73c520d54112da754f" kindref="member">SYX_OBJECT_DATA</ref><sp/>(<ref refid="syx-object_8h_1f517578c6962e7925851fb6d88ebfa98" kindref="member">SYX_BLOCK_CLOSURE_OUTER_FRAME</ref><sp/>(closure));</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref><sp/>=<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1335377c41e8c70178ad2a5ddf66508b4" kindref="member">outer_frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref>;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_18b361a6a8c7a7756bd7bf49adb6ebffd" kindref="member">closure</ref><sp/>=<sp/>closure;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>We<sp/>can&apos;t<sp/>return<sp/>more<sp/>if<sp/>there&apos;s<sp/>no<sp/>parent<sp/>frame.<sp/>See<sp/>BlockClosure_newProcess<sp/>primitive<sp/>for<sp/>instance.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_1e1b68af7dec8776cd14b3d1df923409c" kindref="member">parent_frame</ref>)</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1da8f1ef4a738fbc3289aad49cf419a6e" kindref="member">stack_return_frame</ref><sp/>=<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1335377c41e8c70178ad2a5ddf66508b4" kindref="member">outer_frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1da8f1ef4a738fbc3289aad49cf419a6e" kindref="member">stack_return_frame</ref>;</highlight></codeline>
<codeline lineno="161"><highlight class="normal">}</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*</highlight></codeline>
<codeline lineno="165" refid="syx-interp_8h_15dffc11604b4760e555186fb26cce54c" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_12fe6a5f292ce5d9ab3103878b6d3d7cf" kindref="member">syx_interp_context_to_frame</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>context)</highlight></codeline>
<codeline lineno="166"><highlight class="normal">{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(context))</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*)<sp/><ref refid="syx-types_8h_1c1fcc0de09d041e08a21ae518c09037a" kindref="member">SYX_OOP_CAST_POINTER</ref><sp/>(<ref refid="syx-object_8h_1d00ad7dc6539a466500aeeb34524437a" kindref="member">SYX_CONTEXT_PART_FRAME_POINTER</ref><sp/>(context));</highlight></codeline>
<codeline lineno="171"><highlight class="normal">}</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref></highlight></codeline>
<codeline lineno="179" refid="syx-interp_8h_1237d9e66928c5fb95a9b6e273512951e" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_1f8844c877ec9281208ea602d73880c0f" kindref="member">syx_interp_frame_to_context</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>stack,<sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame)</highlight></codeline>
<codeline lineno="180"><highlight class="normal">{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>context;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>arguments;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!frame)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>))</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>;<sp/></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><ref refid="syx-memory_8h_1ccbca387b22bf3764007fa893f78cefd" kindref="member">syx_memory_gc_begin</ref><sp/>();</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME:<sp/>they&apos;re<sp/>not<sp/>accessible<sp/>for<sp/>GC<sp/>troubles.</highlight></codeline>
<codeline lineno="192"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>Do<sp/>we<sp/>need<sp/>to<sp/>access<sp/>them<sp/>with<sp/>primitives<sp/>or<sp/>do<sp/>we<sp/>need<sp/>to<sp/>detach<sp/>the<sp/>frame<sp/>when</highlight></codeline>
<codeline lineno="193"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>created<sp/>using<sp/>enter_context?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/>arguments<sp/>=<sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_18b361a6a8c7a7756bd7bf49adb6ebffd" kindref="member">closure</ref>))</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>context<sp/>=<sp/><ref refid="syx-object_8c_15b0e62ae669fb1a068cba533885c48d3" kindref="member">syx_block_context_new</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_18b361a6a8c7a7756bd7bf49adb6ebffd" kindref="member">closure</ref>,<sp/>arguments);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1e749658ddae9b2e6f980f63a2a8cb2f5" kindref="member">SYX_CONTEXT_PART_STACK</ref><sp/>(context)<sp/>=<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1f3ecaeed999a18d99d3fd27e9450ab41" kindref="member">detached_frame</ref>;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>context<sp/>=<sp/><ref refid="syx-object_8c_1d27128de6c8566b5bc0c667c8bf4c5b0" kindref="member">syx_method_context_new</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>,<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref>,<sp/>arguments);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1e749658ddae9b2e6f980f63a2a8cb2f5" kindref="member">SYX_CONTEXT_PART_STACK</ref><sp/>(context)<sp/>=<sp/>stack;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><ref refid="syx-object_8h_1d00ad7dc6539a466500aeeb34524437a" kindref="member">SYX_CONTEXT_PART_FRAME_POINTER</ref><sp/>(context)<sp/>=<sp/><ref refid="syx-types_8h_18efde12e307dd616a32f42327b3e80cc" kindref="member">SYX_POINTER_CAST_OOP</ref><sp/>(frame);</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref><sp/>=<sp/>context;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><ref refid="syx-memory_8c_131d33852bc51d3d58ea0bc9fbfd4d9e1" kindref="member">syx_memory_gc_end</ref><sp/>();</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>context;</highlight></codeline>
<codeline lineno="211"><highlight class="normal">}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219" refid="syx-interp_8h_1dbf95deb73b49620ce9b5c884e6cbcae" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_174bb3b8c0b72fcd2b2d2c7c7bba5f5e2" kindref="member">syx_interp_init</ref><sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="220"><highlight class="normal">{</highlight></codeline>
<codeline lineno="221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229" refid="syx-interp_8h_17e6dca8bac2c5fc57dae4cb0d76f23eb" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_141a4fa9a3836e8750667a4134b60835f" kindref="member">syx_interp_quit</ref><sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="230"><highlight class="normal">{</highlight></codeline>
<codeline lineno="231"><highlight class="normal">}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></highlight></codeline>
<codeline lineno="240" refid="syx-interp_8h_1aaa4ae62114dedc402940a51711c5c14" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_167ca91c8a692283098cb5b9c1da4f7ab" kindref="member">syx_interp_swap_context</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>process,<sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>context)</highlight></codeline>
<codeline lineno="241"><highlight class="normal">{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>_state<sp/>=<sp/><ref refid="syx-interp_8h_136ed8b83722f6b5db96c921d75914c8b" kindref="member">SYX_INTERP_STATE_NEW</ref>;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame<sp/>=<sp/><ref refid="syx-interp_8c_12fe6a5f292ce5d9ab3103878b6d3d7cf" kindref="member">syx_interp_context_to_frame</ref><sp/>(context);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!frame)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(process)<sp/>||<sp/><ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(context))</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-types_8h_111cbe8792a6a199aa5562be393851ab5" kindref="member">SYX_OOP_EQ</ref><sp/>(process,<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref>))</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>state<sp/>=<sp/>&amp;_syx_interp_state;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>=<sp/>&amp;_state;</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_switch_process<sp/>(state,<sp/>process);</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/>_syx_interp_state_update<sp/>(state,<sp/>frame);</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="263"><highlight class="normal">}</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></highlight></codeline>
<codeline lineno="271" refid="syx-interp_8h_19a508ea64c04f29c84de6c4a320c86f8" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_1e483ac8c92a367fc44460969715106d9" kindref="member">syx_interp_enter_context</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>process,<sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>context)</highlight></codeline>
<codeline lineno="272"><highlight class="normal">{</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>arguments;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref><sp/>reset_parent_frame<sp/>=<sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>_state<sp/>=<sp/><ref refid="syx-interp_8h_136ed8b83722f6b5db96c921d75914c8b" kindref="member">SYX_INTERP_STATE_NEW</ref>;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>*state;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame;</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(process)<sp/>||<sp/><ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(context))</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-types_8h_111cbe8792a6a199aa5562be393851ab5" kindref="member">SYX_OOP_EQ</ref><sp/>(process,<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref>))</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>state<sp/>=<sp/>&amp;_syx_interp_state;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>=<sp/>&amp;_state;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame<sp/>=<sp/><ref refid="syx-types_8h_1c1fcc0de09d041e08a21ae518c09037a" kindref="member">SYX_OOP_CAST_POINTER</ref><sp/>(<ref refid="syx-object_8h_1c49eda7223af44f10a46c7be40bc3fac" kindref="member">SYX_PROCESS_FRAME_POINTER</ref><sp/>(process));</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>is<sp/>a<sp/>new<sp/>Process,<sp/>reset<sp/>the<sp/>parent_frame<sp/>once<sp/>we<sp/>created<sp/>the<sp/>frame<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>))</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reset_parent_frame<sp/>=<sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref><sp/>=<sp/>frame;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref><sp/>=<sp/>process;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/>arguments<sp/>=<sp/><ref refid="syx-object_8h_1a84583cd063bb91509a65e846f2a0b68" kindref="member">SYX_CONTEXT_PART_ARGUMENTS</ref><sp/>(context);</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(arguments))</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>=<sp/><ref refid="syx-object_8h_16739da61250709a86d303df2aa297758" kindref="member">SYX_OBJECT_DATA_SIZE</ref><sp/>(arguments);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>memcpy<sp/>(state-&gt;<ref refid="struct_syx_interp_state_17f74dc0eca9d27cc7fc5aa7e2a7d3e20" kindref="member">message_arguments</ref>,<sp/><ref refid="syx-object_8h_1fc625eb398e3bd73c520d54112da754f" kindref="member">SYX_OBJECT_DATA</ref><sp/>(arguments),<sp/>state-&gt;<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>*<sp/>sizeof<sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref>));</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-types_8h_111cbe8792a6a199aa5562be393851ab5" kindref="member">SYX_OOP_EQ</ref><sp/>(<ref refid="syx-object_8h_188d1e4f8e61fb948d275e3900cec21fe" kindref="member">syx_object_get_class</ref><sp/>(context),<sp/><ref refid="syx-object_8c_110eccfc9fce175592c0b2a43953da5e3" kindref="member">syx_block_context_class</ref>))</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/>_syx_interp_frame_prepare_new_closure<sp/>(state,<sp/><ref refid="syx-object_8h_1ba94eb81806582fdd6ada41055269946" kindref="member">SYX_BLOCK_CONTEXT_CLOSURE</ref><sp/>(context));</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref><sp/>=<sp/><ref refid="syx-object_8h_155222831a7e6ae8717b66ecb10d077b5" kindref="member">SYX_METHOD_CONTEXT_RECEIVER</ref><sp/>(context);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_frame_prepare_new<sp/>(state,<sp/><ref refid="syx-object_8h_1df6a9f8fef4d817ec6c930a40a9841bb" kindref="member">SYX_CONTEXT_PART_METHOD</ref><sp/>(context));</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reset_parent_frame)</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1da8f1ef4a738fbc3289aad49cf419a6e" kindref="member">stack_return_frame</ref><sp/>=<sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1e1b68af7dec8776cd14b3d1df923409c" kindref="member">parent_frame</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/>state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref><sp/>=<sp/>context;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><ref refid="syx-object_8h_1d00ad7dc6539a466500aeeb34524437a" kindref="member">SYX_CONTEXT_PART_FRAME_POINTER</ref><sp/>(context)<sp/>=<sp/><ref refid="syx-types_8h_18efde12e307dd616a32f42327b3e80cc" kindref="member">SYX_POINTER_CAST_OOP</ref><sp/>(state-&gt;<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>);</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/>_syx_interp_save_process_state<sp/>(state);</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="320"><highlight class="normal">}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></highlight></codeline>
<codeline lineno="334" refid="syx-interp_8h_1f677bca3ba7ff8315ce0b1406b7a97b5" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_10c2ace1d18e0f3649ca19345bb5a89d5" kindref="member">syx_interp_leave_and_answer</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>return_object,<sp/><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref><sp/>use_stack_return)</highlight></codeline>
<codeline lineno="335"><highlight class="normal">{</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*return_frame<sp/>=<sp/>(use_stack_return</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1da8f1ef4a738fbc3289aad49cf419a6e" kindref="member">stack_return_frame</ref></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1e1b68af7dec8776cd14b3d1df923409c" kindref="member">parent_frame</ref>);</highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_CONTEXT</highlight></codeline>
<codeline lineno="341"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;CONTEXT<sp/>-<sp/>Leave<sp/>frame<sp/>%p<sp/>for<sp/>%p<sp/>-<sp/>Depth:<sp/>%d<sp/>-<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>,<sp/>return_frame,<sp/>--_frame_depth,</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(_SYX_INTERP_IN_BLOCK</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>NULL</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="syx-object_8h_1d9120176c6ebd87a4075472386e6f748" kindref="member">SYX_OBJECT_STRING</ref><sp/>(<ref refid="syx-object_8h_1e98de75db34b515c3f1141bd3edbccd4" kindref="member">SYX_METHOD_SELECTOR</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>))));</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="346"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><ref refid="syx-object_8h_1c6e63002ff510661d3f5c92177d9018e" kindref="member">SYX_PROCESS_RETURNED_OBJECT</ref>(<ref refid="syx-scheduler_8h_13785c5106dbc4cdcb992b6d17024da72" kindref="member">syx_processor_active_process</ref>)<sp/>=<sp/>return_object;</highlight></codeline>
<codeline lineno="348"><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref><sp/>=<sp/>return_frame;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!return_frame)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-scheduler_8c_15eed9263555dd5245c7ab05cdf59d995" kindref="member">syx_scheduler_remove_process</ref><sp/>(<ref refid="syx-scheduler_8h_13785c5106dbc4cdcb992b6d17024da72" kindref="member">syx_processor_active_process</ref>);</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/>_syx_interp_state_update<sp/>(&amp;_syx_interp_state,<sp/>return_frame);</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(return_object);</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368" refid="syx-interp_8h_1eafe6b33c73dafb5b724de995c487e1b" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_186764c60b013f2d11406a06ef5703735" kindref="member">syx_process_execute_scheduled</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>process)</highlight></codeline>
<codeline lineno="369"><highlight class="normal">{</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>byte;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/>_syx_interp_switch_process<sp/>(&amp;_syx_interp_state,<sp/>process);</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref><sp/>&amp;&amp;<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_191e90bd79f62f35a5746aef791506acb" kindref="member">byteslice</ref><sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>=<sp/>_syx_interp_get_next_byte<sp/>();</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>more<sp/>frames<sp/>or<sp/>somebody<sp/>wants<sp/>to<sp/>yield<sp/>control<sp/>to<sp/>other<sp/>processes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_syx_interp_execute_byte<sp/>(byte))</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_191e90bd79f62f35a5746aef791506acb" kindref="member">byteslice</ref>--;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/>_syx_interp_save_process_state<sp/>(&amp;_syx_interp_state);</highlight></codeline>
<codeline lineno="384"><highlight class="normal">}</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390" refid="syx-interp_8h_11260b0caa0982d0e6d2d0a858bea5867" refkind="member"><highlight class="normal"><ref refid="syx-interp_8c_134287a6590d55ee7225b0437a73609b0" kindref="member">syx_process_execute_blocking</ref><sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>process)</highlight></codeline>
<codeline lineno="391"><highlight class="normal">{</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_state" kindref="compound">SyxInterpState</ref><sp/>orig_state;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>orig_process;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>byte;</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><ref refid="syx-profile_8h_13b9369ab3f0b8d0366b7f97b9b2e9913" kindref="member">SYX_START_PROFILE</ref>;</highlight></codeline>
<codeline lineno="397"><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(process))</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-scheduler_8c_15eed9263555dd5245c7ab05cdf59d995" kindref="member">syx_scheduler_remove_process</ref><sp/>(process);</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/>orig_process<sp/>=<sp/><ref refid="syx-scheduler_8h_13785c5106dbc4cdcb992b6d17024da72" kindref="member">syx_processor_active_process</ref>;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>orig_state<sp/>=<sp/>_syx_interp_state;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/>_syx_interp_save_process_state<sp/>(&amp;_syx_interp_state);</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/>_syx_interp_switch_process<sp/>(&amp;_syx_interp_state,<sp/>process);</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><ref refid="syx-scheduler_8h_13785c5106dbc4cdcb992b6d17024da72" kindref="member">syx_processor_active_process</ref><sp/>=<sp/>process;</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>)</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>=<sp/>_syx_interp_get_next_byte<sp/>();</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_execute_byte<sp/>(byte);</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/>_syx_interp_save_process_state<sp/>(&amp;_syx_interp_state);</highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><ref refid="syx-scheduler_8h_13785c5106dbc4cdcb992b6d17024da72" kindref="member">syx_processor_active_process</ref><sp/>=<sp/>orig_process;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/>_syx_interp_switch_process<sp/>(&amp;_syx_interp_state,<sp/>orig_process);</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><ref refid="syx-scheduler_8c_15eed9263555dd5245c7ab05cdf59d995" kindref="member">syx_scheduler_remove_process</ref><sp/>(process);</highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><ref refid="syx-profile_8h_16c83a6245e6bb84f65dc1d0471656ccf" kindref="member">SYX_END_PROFILE</ref>(blocking);</highlight></codeline>
<codeline lineno="425"><highlight class="normal">}</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Bytecode<sp/>intepreter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-interp_8h_117bf8fdae73c510d8e75076664ce9e4b" kindref="member">SyxInterpreterFunc</ref><sp/>handlers[]<sp/>=</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_instance,</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_argument,</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_temporary,</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_literal,</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_constant,</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_binding_variable,</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_array,</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_push_block_closure,</highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_assign_instance,</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_assign_temporary,</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_assign_binding_variable,</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_mark_arguments,</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_send_message,</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_send_super,</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_send_unary,</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_send_binary,</highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_do_special,</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/>syx_interp_do_extended</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/>};</highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>*</highlight></codeline>
<codeline lineno="456"><highlight class="normal">_syx_interp_find_argument<sp/>(<ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>argument)</highlight></codeline>
<codeline lineno="457"><highlight class="normal">{</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>;</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>argument<sp/>index<sp/>created<sp/>by<sp/>the<sp/>parser<sp/>is<sp/>the<sp/>totally<sp/>index<sp/>of<sp/>all<sp/>outer<sp/>arguments.</highlight></codeline>
<codeline lineno="460"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>So<sp/>we<sp/>need<sp/>to<sp/>find<sp/>the<sp/>right<sp/>scope<sp/>by<sp/>looping<sp/>trough<sp/>outer<sp/>frames<sp/>and<sp/>their<sp/>arguments.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(frame)</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>count<sp/>=<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_1b5c4f1e16d1d4ac619621ab96b12d009" kindref="member">SYX_CODE_ARGUMENTS_COUNT</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>));</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(count<sp/>&gt;<sp/>argument)</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>*)&amp;frame-&gt;<ref refid="struct_syx_interp_frame_1f98a9a47dea773894bddcac57c9dddb3" kindref="member">local</ref>)<sp/>+<sp/>argument;</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>argument<sp/>-=<sp/>count;</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame<sp/>=<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1335377c41e8c70178ad2a5ddf66508b4" kindref="member">outer_frame</ref>;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>this<sp/>shouldn&apos;t<sp/>be<sp/>reached,<sp/>maybe<sp/>a<sp/>parser<sp/>fault?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/>assert<sp/>(<ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="473"><highlight class="normal">}</highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>*</highlight></codeline>
<codeline lineno="476"><highlight class="normal">_syx_interp_find_temporary<sp/>(<ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>temporary)</highlight></codeline>
<codeline lineno="477"><highlight class="normal">{</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>;</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>temporary<sp/>index<sp/>created<sp/>by<sp/>the<sp/>parser<sp/>is<sp/>the<sp/>totally<sp/>index<sp/>of<sp/>all<sp/>outer<sp/>temporaries.</highlight></codeline>
<codeline lineno="480"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>So<sp/>we<sp/>need<sp/>to<sp/>find<sp/>the<sp/>right<sp/>scope<sp/>by<sp/>looping<sp/>trough<sp/>outer<sp/>frames<sp/>and<sp/>their<sp/>arguments.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(frame)</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>count<sp/>=<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_14acfab65c2c72d409325dc662d34dc5b" kindref="member">SYX_CODE_TEMPORARIES_COUNT</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>));</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(count<sp/>&gt;<sp/>temporary)</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>*)&amp;frame-&gt;<ref refid="struct_syx_interp_frame_1f98a9a47dea773894bddcac57c9dddb3" kindref="member">local</ref><sp/>+<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_1b5c4f1e16d1d4ac619621ab96b12d009" kindref="member">SYX_CODE_ARGUMENTS_COUNT</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>)))<sp/>+<sp/>temporary;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>temporary<sp/>-=<sp/>count;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame<sp/>=<sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1335377c41e8c70178ad2a5ddf66508b4" kindref="member">outer_frame</ref>;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>this<sp/>shouldn&apos;t<sp/>be<sp/>reached,<sp/>maybe<sp/>a<sp/>parser<sp/>fault?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/>assert<sp/>(<ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="493"><highlight class="normal">}</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_instance)</highlight></codeline>
<codeline lineno="496"><highlight class="normal">{</highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="498"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>instance<sp/>at<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="500"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(<ref refid="syx-object_8h_14b6aa57daec9c56e87fe8948101d99bc" kindref="member">SYX_OBJECT_VARS</ref>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref>)[argument]);</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="502"><highlight class="normal">}</highlight></codeline>
<codeline lineno="503"><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_argument)</highlight></codeline>
<codeline lineno="505"><highlight class="normal">{</highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="507"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>argument<sp/>at<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="508"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="509"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(argument<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref>);</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(*_syx_interp_find_argument<sp/>(argument<sp/>-<sp/>1));</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="515"><highlight class="normal">}</highlight></codeline>
<codeline lineno="516"><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_temporary)</highlight></codeline>
<codeline lineno="518"><highlight class="normal">{</highlight></codeline>
<codeline lineno="519"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="520"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>temporary<sp/>at<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="522"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(*_syx_interp_find_temporary<sp/>(argument));</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="524"><highlight class="normal">}</highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_literal)</highlight></codeline>
<codeline lineno="527"><highlight class="normal">{</highlight></codeline>
<codeline lineno="528"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="529"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>literal<sp/>at<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="530"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="531"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref>[argument]);</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="533"><highlight class="normal">}</highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_constant)</highlight></codeline>
<codeline lineno="536"><highlight class="normal">{</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>context;</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="539"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>constant<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="540"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="541"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(argument)</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1bfdf45841eaefa280895bce3ccb9d273deaa1a5b820f053cbd87570e818ca60e" kindref="member">SYX_BYTECODE_CONST_NIL</ref>:</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(<ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>);</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1bfdf45841eaefa280895bce3ccb9d27392a0faee7fa036528e12d54e0bcd7b98" kindref="member">SYX_BYTECODE_CONST_TRUE</ref>:</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(<ref refid="syx-object_8c_1420b624002efae10b26b6ae50e4a2676" kindref="member">syx_true</ref>);</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1bfdf45841eaefa280895bce3ccb9d27372973e7bda488daf8b8dfdee4744922f" kindref="member">SYX_BYTECODE_CONST_FALSE</ref>:</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(<ref refid="syx-object_8c_1f40bef822ab93070372bb305d0443bd5" kindref="member">syx_false</ref>);</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1bfdf45841eaefa280895bce3ccb9d27313053189291d24f0d97496d571e58d1e" kindref="member">SYX_BYTECODE_CONST_CONTEXT</ref>:</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>context<sp/>=<sp/><ref refid="syx-interp_8c_1f8844c877ec9281208ea602d73880c0f" kindref="member">syx_interp_frame_to_context</ref><sp/>(<ref refid="syx-object_8h_17c831375f6160c5b537d391cab06e10e" kindref="member">SYX_PROCESS_STACK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1b09c376de8773f23719ee7545770c631" kindref="member">process</ref>),</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>);</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(context);</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8c_10b4ecf0c440811157a5bc63545665742" kindref="member">syx_signal</ref><sp/>(<ref refid="syx-enums_8h_14b3bc4c6edc3fea1ee42d40b28384101569a8cbd1f0f3c1108becc4c35b55603" kindref="member">SYX_ERROR_INTERP</ref>,<sp/><ref refid="syx-object_8h_1ef1b7868c0a729cc4f27596291a9e08d" kindref="member">syx_string_new</ref><sp/>(</highlight><highlight class="stringliteral">&quot;Unknown<sp/>constant&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="563"><highlight class="normal">}</highlight></codeline>
<codeline lineno="564"><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_binding_variable)</highlight></codeline>
<codeline lineno="566"><highlight class="normal">{</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>binding;</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>object;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/>binding<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref>[argument];</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/>=<sp/><ref refid="syx-object_8c_1a81f27a1ea91fc341ccee4224b4fef1c" kindref="member">syx_dictionary_bind</ref><sp/>(binding);</highlight></codeline>
<codeline lineno="572"><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="574"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>binding<sp/>variable:<sp/>&apos;%s&apos;<sp/>-&gt;<sp/>%d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_15b9c62927be3b204756647a1ee461d1d" kindref="member">SYX_OBJECT_SYMBOL</ref>(<ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref>(binding)),</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_130f472220bcb98f2882f5ad89bd7480e" kindref="member">SYX_ASSOCIATION_VALUE</ref><sp/>(binding)));</highlight></codeline>
<codeline lineno="577"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="578"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(</highlight><highlight class="keywordtype">object</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="581"><highlight class="normal">}</highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_array)</highlight></codeline>
<codeline lineno="584"><highlight class="normal">{</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>array;</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>i;</highlight></codeline>
<codeline lineno="587"><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/>array<sp/>=<sp/><ref refid="syx-object_8h_1bae072a6a2e20392d22f98e09fdc42c0" kindref="member">syx_array_new_size</ref><sp/>(argument);</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=1;<sp/>i<sp/>&lt;=<sp/>argument;<sp/>i++)</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1fc625eb398e3bd73c520d54112da754f" kindref="member">SYX_OBJECT_DATA</ref>(array)[argument<sp/>-<sp/>i]<sp/>=<sp/><ref refid="syx-interp_8h_145923c7b4635a8225267ddd73d208b1d" kindref="member">syx_interp_stack_pop</ref><sp/>();</highlight></codeline>
<codeline lineno="591"><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="593"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>array<sp/>of<sp/>elements:<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="594"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="595"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(array);</highlight></codeline>
<codeline lineno="597"><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="599"><highlight class="normal">}</highlight></codeline>
<codeline lineno="600"><highlight class="normal"></highlight></codeline>
<codeline lineno="601"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_assign_instance)</highlight></codeline>
<codeline lineno="602"><highlight class="normal">{</highlight></codeline>
<codeline lineno="603"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="604"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Assign<sp/>instance<sp/>at<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="605"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="606"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-object_8h_14b6aa57daec9c56e87fe8948101d99bc" kindref="member">SYX_OBJECT_VARS</ref>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref>)[argument]<sp/>=<sp/><ref refid="syx-interp_8h_1441849bafd3d13926bea2008361f6d47" kindref="member">syx_interp_stack_peek</ref><sp/>();</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="608"><highlight class="normal">}</highlight></codeline>
<codeline lineno="609"><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_assign_temporary)</highlight></codeline>
<codeline lineno="611"><highlight class="normal">{</highlight></codeline>
<codeline lineno="612"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="613"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Assign<sp/>temporary<sp/>at<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="614"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="615"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/>*(_syx_interp_find_temporary<sp/>(argument))<sp/>=<sp/><ref refid="syx-interp_8h_1441849bafd3d13926bea2008361f6d47" kindref="member">syx_interp_stack_peek</ref><sp/>();</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="617"><highlight class="normal">}</highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_assign_binding_variable)</highlight></codeline>
<codeline lineno="620"><highlight class="normal">{</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>binding;</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>value;</highlight></codeline>
<codeline lineno="623"><highlight class="normal"></highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/>binding<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref>[argument];</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/>value<sp/>=<sp/><ref refid="syx-interp_8h_1441849bafd3d13926bea2008361f6d47" kindref="member">syx_interp_stack_peek</ref><sp/>();</highlight></codeline>
<codeline lineno="626"><highlight class="normal"></highlight></codeline>
<codeline lineno="627"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="628"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Assign<sp/>binding<sp/>variable<sp/>&apos;%s&apos;<sp/>-&gt;<sp/>%p\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_15b9c62927be3b204756647a1ee461d1d" kindref="member">SYX_OBJECT_SYMBOL</ref>(<ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref>(binding)),</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-types_8h_1c1fcc0de09d041e08a21ae518c09037a" kindref="member">SYX_OOP_CAST_POINTER</ref><sp/>(value));</highlight></codeline>
<codeline lineno="631"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="632"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><ref refid="syx-object_8c_1b780a6826d077c055fc6714972723709" kindref="member">syx_dictionary_bind_set_value</ref><sp/>(binding,<sp/>value);</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="635"><highlight class="normal">}</highlight></codeline>
<codeline lineno="636"><highlight class="normal"></highlight></codeline>
<codeline lineno="637"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_mark_arguments)</highlight></codeline>
<codeline lineno="638"><highlight class="normal">{</highlight></codeline>
<codeline lineno="639"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="640"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Mark<sp/>arguments<sp/>%d<sp/>+<sp/>receiver\n&quot;</highlight><highlight class="normal">,<sp/>argument);</highlight></codeline>
<codeline lineno="641"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="642"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>=<sp/>argument;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref><sp/>-=<sp/>argument;</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/>memcpy<sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_17f74dc0eca9d27cc7fc5aa7e2a7d3e20" kindref="member">message_arguments</ref>,</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref>,</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>argument<sp/>*<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref>));</highlight></codeline>
<codeline lineno="648"><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref><sp/>=<sp/><ref refid="syx-interp_8h_145923c7b4635a8225267ddd73d208b1d" kindref="member">syx_interp_stack_pop</ref><sp/>();</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_191e90bd79f62f35a5746aef791506acb" kindref="member">byteslice</ref>++;<sp/></highlight><highlight class="comment">/*<sp/>be<sp/>sure<sp/>we<sp/>send<sp/>the<sp/>message<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"></highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="653"><highlight class="normal">}</highlight></codeline>
<codeline lineno="654"><highlight class="normal"></highlight></codeline>
<codeline lineno="655"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_send_message)</highlight></codeline>
<codeline lineno="656"><highlight class="normal">{</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>binding;</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>klass,<sp/>method;</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>primitive;</highlight></codeline>
<codeline lineno="660"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_CONTEXT</highlight></codeline>
<codeline lineno="661"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>depth;</highlight></codeline>
<codeline lineno="662"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="663"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><ref refid="syx-profile_8h_13b9369ab3f0b8d0366b7f97b9b2e9913" kindref="member">SYX_START_PROFILE</ref>;</highlight></codeline>
<codeline lineno="665"><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/>binding<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref>[argument];</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/>klass<sp/>=<sp/><ref refid="syx-object_8h_188d1e4f8e61fb948d275e3900cec21fe" kindref="member">syx_object_get_class</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>);<sp/></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/>method<sp/>=<sp/><ref refid="syx-object_8c_1991b1329938b84d777d0ad23f778dba9" kindref="member">syx_class_lookup_method_binding</ref><sp/>(klass,<sp/>binding);</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><ref refid="syx-profile_8h_16c83a6245e6bb84f65dc1d0471656ccf" kindref="member">SYX_END_PROFILE</ref>(send_message);</highlight></codeline>
<codeline lineno="670"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="671"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_CONTEXT</highlight></codeline>
<codeline lineno="672"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/>putchar(</highlight><highlight class="charliteral">&apos;`&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(depth=0;<sp/>depth<sp/>&lt;<sp/>_frame_depth;<sp/>depth++)</highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/>putchar(</highlight><highlight class="charliteral">&apos;-&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="675"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="676"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Send<sp/>message<sp/>%s%s#%s\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(<ref refid="syx-object_8h_1d772af235c9512a18d5cbb8e9d0bb022" kindref="member">SYX_CLASS_NAME</ref><sp/>(<ref refid="syx-object_8h_188d1e4f8e61fb948d275e3900cec21fe" kindref="member">syx_object_get_class</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>)))</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="syx-object_8h_1d9120176c6ebd87a4075472386e6f748" kindref="member">SYX_OBJECT_STRING</ref><sp/>(<ref refid="syx-object_8h_1d772af235c9512a18d5cbb8e9d0bb022" kindref="member">SYX_CLASS_NAME</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>))</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="syx-object_8h_1d9120176c6ebd87a4075472386e6f748" kindref="member">SYX_OBJECT_STRING</ref><sp/>(<ref refid="syx-object_8h_1d772af235c9512a18d5cbb8e9d0bb022" kindref="member">SYX_CLASS_NAME</ref><sp/>(<ref refid="syx-object_8h_188d1e4f8e61fb948d275e3900cec21fe" kindref="member">syx_object_get_class</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>))),</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(<ref refid="syx-object_8h_1d772af235c9512a18d5cbb8e9d0bb022" kindref="member">SYX_CLASS_NAME</ref><sp/>(<ref refid="syx-object_8h_188d1e4f8e61fb948d275e3900cec21fe" kindref="member">syx_object_get_class</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>)))</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;<sp/>class&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_15b9c62927be3b204756647a1ee461d1d" kindref="member">SYX_OBJECT_SYMBOL</ref><sp/>(<ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref><sp/>(binding)));</highlight></codeline>
<codeline lineno="684"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="685"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(method))</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="688"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="689"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>NOT<sp/>UNDERSTOOD<sp/>#%s\n&quot;</highlight><highlight class="normal">,<sp/><ref refid="syx-object_8h_15b9c62927be3b204756647a1ee461d1d" kindref="member">SYX_OBJECT_SYMBOL</ref><sp/>(<ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref><sp/>(binding)));</highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="691"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-error_8c_18211271c20a9e598b2c395b60bd892a0" kindref="member">syx_signal_does_not_understand</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>,<sp/><ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref><sp/>(binding));</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="693"><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/>primitive<sp/>=<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_1539c213e23ecd6648b7219ba0f1fe40b" kindref="member">SYX_METHOD_PRIMITIVE</ref><sp/>(method));</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(primitive<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>primitive<sp/>&lt;<sp/><ref refid="syx-interp_8h_174a8bedcef0fe39a058e5c6beb5f6662" kindref="member">SYX_PRIMITIVES_MAX</ref>)</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-interp_8h_191229ee5f9766714c7bdfb51cfb34258" kindref="member">syx_interp_call_primitive</ref><sp/>(primitive,<sp/>method);</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(primitive<sp/>==<sp/>-2)</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-plugins_8c_15f38432e4548b44f86339de097cc50c6" kindref="member">syx_plugin_call_interp</ref><sp/>(&amp;_syx_interp_state,<sp/>method);</highlight></codeline>
<codeline lineno="699"><highlight class="normal"></highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/>_syx_interp_frame_prepare_new<sp/>(&amp;_syx_interp_state,<sp/>method);</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="702"><highlight class="normal">}</highlight></codeline>
<codeline lineno="703"><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_send_super)</highlight></codeline>
<codeline lineno="705"><highlight class="normal">{</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>binding;</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>klass,<sp/>method;</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>primitive;</highlight></codeline>
<codeline lineno="709"><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/>binding<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref>[argument];</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/>klass<sp/>=<sp/><ref refid="syx-object_8h_15307ee0e36a40bca0cc49aec373c4232" kindref="member">SYX_CLASS_SUPERCLASS</ref><sp/>(<ref refid="syx-object_8h_1456cf11d874f9f0553fadd714775316d" kindref="member">SYX_CODE_CLASS</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>));</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/>method<sp/>=<sp/><ref refid="syx-object_8c_1991b1329938b84d777d0ad23f778dba9" kindref="member">syx_class_lookup_method_binding</ref><sp/>(klass,<sp/>binding);</highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="715"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Send<sp/>message<sp/>#%s<sp/>to<sp/>super\n&quot;</highlight><highlight class="normal">,<sp/><ref refid="syx-object_8h_15b9c62927be3b204756647a1ee461d1d" kindref="member">SYX_OBJECT_SYMBOL</ref><sp/>(<ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref><sp/>(binding)));</highlight></codeline>
<codeline lineno="716"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="717"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(method))</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="720"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="721"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>NOT<sp/>UNDERSTOOD<sp/>super<sp/>#%s\n&quot;</highlight><highlight class="normal">,<sp/><ref refid="syx-object_8h_15b9c62927be3b204756647a1ee461d1d" kindref="member">SYX_OBJECT_SYMBOL</ref><sp/>(<ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref><sp/>(binding)));</highlight></codeline>
<codeline lineno="722"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="723"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-error_8c_18211271c20a9e598b2c395b60bd892a0" kindref="member">syx_signal_does_not_understand</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1d5b8d2093857c4a4d0fa5493ea3d2f25" kindref="member">message_receiver</ref>,<sp/><ref refid="syx-object_8h_196eb58398db62043c949d60b43a640d3" kindref="member">SYX_ASSOCIATION_KEY</ref><sp/>(binding));</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="725"><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/>primitive<sp/>=<sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_1539c213e23ecd6648b7219ba0f1fe40b" kindref="member">SYX_METHOD_PRIMITIVE</ref><sp/>(method));</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(primitive<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>primitive<sp/>&lt;<sp/><ref refid="syx-interp_8h_174a8bedcef0fe39a058e5c6beb5f6662" kindref="member">SYX_PRIMITIVES_MAX</ref>)</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-interp_8h_191229ee5f9766714c7bdfb51cfb34258" kindref="member">syx_interp_call_primitive</ref><sp/>(primitive,<sp/>method);</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(primitive<sp/>==<sp/>-2)</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-plugins_8c_15f38432e4548b44f86339de097cc50c6" kindref="member">syx_plugin_call_interp</ref><sp/>(&amp;_syx_interp_state,<sp/>method);</highlight></codeline>
<codeline lineno="731"><highlight class="normal"></highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/>_syx_interp_frame_prepare_new<sp/>(&amp;_syx_interp_state,<sp/>method);</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="734"><highlight class="normal">}</highlight></codeline>
<codeline lineno="735"><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_send_unary)</highlight></codeline>
<codeline lineno="737"><highlight class="normal">{</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="739"><highlight class="comment"><sp/><sp/>SyxOop<sp/>klass,<sp/>method,<sp/>context;</highlight></codeline>
<codeline lineno="740"><highlight class="comment"><sp/><sp/>syx_int32<sp/>primitive;</highlight></codeline>
<codeline lineno="741"><highlight class="comment"><sp/><sp/>syx_int32<sp/>index;</highlight></codeline>
<codeline lineno="742"><highlight class="comment"><sp/><sp/>SyxOop<sp/>binding;</highlight></codeline>
<codeline lineno="743"><highlight class="comment"><sp/><sp/>syx_symbol<sp/>selector;</highlight></codeline>
<codeline lineno="744"><highlight class="comment"><sp/><sp/></highlight></codeline>
<codeline lineno="745"><highlight class="comment"><sp/><sp/>_syx_exec_state-&gt;message_receiver<sp/>=<sp/>syx_interp_stack_pop<sp/>();</highlight></codeline>
<codeline lineno="746"><highlight class="comment"><sp/><sp/>index<sp/>=<sp/>SYX_SMALL_INTEGER<sp/>(SYX_ASSOCIATION_KEY<sp/>(_syx_exec_state-&gt;literals[argument]));</highlight></codeline>
<codeline lineno="747"><highlight class="comment"><sp/><sp/>binding<sp/>=<sp/>SYX_ASSOCIATION_VALUE<sp/>(_syx_exec_state-&gt;literals[argument]);</highlight></codeline>
<codeline lineno="748"><highlight class="comment"><sp/><sp/>selector<sp/>=<sp/>SYX_OBJECT_SYMBOL<sp/>(SYX_ASSOCIATION_KEY<sp/>(binding));</highlight></codeline>
<codeline lineno="749"><highlight class="comment"></highlight></codeline>
<codeline lineno="750"><highlight class="comment"><sp/><sp/>switch<sp/>(index)</highlight></codeline>
<codeline lineno="751"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="752"><highlight class="comment"><sp/><sp/><sp/><sp/>case<sp/>0:</highlight></codeline>
<codeline lineno="753"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="754"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>syx_debug<sp/>(&quot;BYTECODE<sp/>-<sp/>Send<sp/>unary<sp/>message<sp/>isNil\n&quot;);</highlight></codeline>
<codeline lineno="755"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight></codeline>
<codeline lineno="756"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_IS_NIL<sp/>(_syx_exec_state-&gt;message_receiver)));</highlight></codeline>
<codeline lineno="757"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="758"><highlight class="comment"><sp/><sp/><sp/><sp/>case<sp/>1:</highlight></codeline>
<codeline lineno="759"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="760"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>syx_debug<sp/>(&quot;BYTECODE<sp/>-<sp/>Send<sp/>unary<sp/>message<sp/>notNil\n&quot;);</highlight></codeline>
<codeline lineno="761"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight></codeline>
<codeline lineno="762"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(!SYX_IS_NIL<sp/>(_syx_exec_state-&gt;message_receiver)));</highlight></codeline>
<codeline lineno="763"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="764"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="765"><highlight class="comment"></highlight></codeline>
<codeline lineno="766"><highlight class="comment"><sp/><sp/>klass<sp/>=<sp/>syx_object_get_class<sp/>(_syx_exec_state-&gt;message_receiver);</highlight></codeline>
<codeline lineno="767"><highlight class="comment"><sp/><sp/>method<sp/>=<sp/>syx_class_lookup_method_binding<sp/>(klass,<sp/>binding);<sp/><sp/></highlight></codeline>
<codeline lineno="768"><highlight class="comment"></highlight></codeline>
<codeline lineno="769"><highlight class="comment">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="770"><highlight class="comment"><sp/><sp/>syx_debug<sp/>(&quot;BYTECODE<sp/>-<sp/>Send<sp/>unary<sp/>message<sp/>#%s\n&quot;,<sp/>selector);</highlight></codeline>
<codeline lineno="771"><highlight class="comment">#endif</highlight></codeline>
<codeline lineno="772"><highlight class="comment"></highlight></codeline>
<codeline lineno="773"><highlight class="comment"><sp/><sp/>if<sp/>(SYX_IS_NIL<sp/>(method))</highlight></codeline>
<codeline lineno="774"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="775"><highlight class="comment">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="776"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>syx_debug<sp/>(&quot;BYTECODE<sp/>-<sp/>NOT<sp/>UNDERSTOOD<sp/>unary<sp/>#%s\n&quot;,<sp/>selector);</highlight></codeline>
<codeline lineno="777"><highlight class="comment">#endif</highlight></codeline>
<codeline lineno="778"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>syx_signal_does_not_understand<sp/>(_syx_exec_state-&gt;message_receiver,<sp/>syx_symbol_new<sp/>(selector));</highlight></codeline>
<codeline lineno="779"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="780"><highlight class="comment"></highlight></codeline>
<codeline lineno="781"><highlight class="comment"><sp/><sp/>primitive<sp/>=<sp/>SYX_SMALL_INTEGER<sp/>(SYX_METHOD_PRIMITIVE<sp/>(method));</highlight></codeline>
<codeline lineno="782"><highlight class="comment"><sp/><sp/>if<sp/>(primitive<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>primitive<sp/>&lt;<sp/>SYX_PRIMITIVES_MAX)</highlight></codeline>
<codeline lineno="783"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>syx_interp_call_primitive<sp/>(primitive,<sp/>method);</highlight></codeline>
<codeline lineno="784"><highlight class="comment"><sp/><sp/>else<sp/>if<sp/>(primitive<sp/>==<sp/>-2)</highlight></codeline>
<codeline lineno="785"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>syx_plugin_call_interp<sp/>(_syx_exec_state,<sp/>method);</highlight></codeline>
<codeline lineno="786"><highlight class="comment"></highlight></codeline>
<codeline lineno="787"><highlight class="comment"><sp/><sp/><sp/><sp/>context<sp/>=<sp/>syx_method_context_new<sp/>(_syx_exec_state-&gt;context,<sp/>method,<sp/>_syx_exec_state-&gt;message_receiver,<sp/>syx_nil);</highlight></codeline>
<codeline lineno="788"><highlight class="comment"></highlight></codeline>
<codeline lineno="789"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>syx_interp_enter_context<sp/>(context);*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="791"><highlight class="normal">}</highlight></codeline>
<codeline lineno="792"><highlight class="normal"></highlight></codeline>
<codeline lineno="793"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_push_block_closure)</highlight></codeline>
<codeline lineno="794"><highlight class="normal">{</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*frame;</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_19f31c17555a2dfcf25da84b5c4a2e55b" kindref="member">syx_int32</ref><sp/>frame_size;</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>frame_oop;</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>closure;</highlight></codeline>
<codeline lineno="799"><highlight class="normal"></highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><ref refid="syx-memory_8h_1ccbca387b22bf3764007fa893f78cefd" kindref="member">syx_memory_gc_begin</ref><sp/>();</highlight></codeline>
<codeline lineno="801"><highlight class="normal"></highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/>closure<sp/>=<sp/><ref refid="syx-object_8c_187ae9f3c62c6c608d8d0c854067048a1" kindref="member">syx_object_copy</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1dfb509f8e062636815ea466b4af1524e" kindref="member">method_literals</ref>[argument]);</highlight></codeline>
<codeline lineno="803"><highlight class="normal"></highlight></codeline>
<codeline lineno="804"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="805"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Push<sp/>block<sp/>closure<sp/>%d<sp/>-&gt;<sp/>%p\n&quot;</highlight><highlight class="normal">,<sp/>argument,<sp/><ref refid="syx-types_8h_1c1fcc0de09d041e08a21ae518c09037a" kindref="member">SYX_OOP_CAST_POINTER</ref><sp/>(closure));</highlight></codeline>
<codeline lineno="806"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="807"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(closure);</highlight></codeline>
<codeline lineno="809"><highlight class="normal"></highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1f3ecaeed999a18d99d3fd27e9450ab41" kindref="member">detached_frame</ref>))</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1f517578c6962e7925851fb6d88ebfa98" kindref="member">SYX_BLOCK_CLOSURE_OUTER_FRAME</ref>(closure)<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1f3ecaeed999a18d99d3fd27e9450ab41" kindref="member">detached_frame</ref>;</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Copy<sp/>up<sp/>to<sp/>temporaries<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame_size<sp/>=<sp/><ref refid="syx-types_8h_1e109977ff8e34b7265d4442c9ec39560" kindref="member">SYX_POINTERS_OFFSET</ref><sp/>(&amp;_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1f98a9a47dea773894bddcac57c9dddb3" kindref="member">local</ref>,<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>)<sp/>+</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_1b5c4f1e16d1d4ac619621ab96b12d009" kindref="member">SYX_CODE_ARGUMENTS_COUNT</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>))<sp/>+</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-types_8h_11776ff2dcc28f7ba6cb59366b5c741cc" kindref="member">SYX_SMALL_INTEGER</ref><sp/>(<ref refid="syx-object_8h_14acfab65c2c72d409325dc662d34dc5b" kindref="member">SYX_CODE_TEMPORARIES_COUNT</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_185720d5804b47e6f194e492075cad886" kindref="member">method</ref>));</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame_oop<sp/>=<sp/><ref refid="syx-object_8h_15c63c40451ce204441acff87eea226bc" kindref="member">syx_array_new_ref</ref><sp/>(frame_size,<sp/>(<ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>*)_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>);</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame<sp/>=<sp/>(<ref refid="struct_syx_interp_frame" kindref="compound">SyxInterpFrame</ref><sp/>*)<ref refid="syx-object_8h_1fc625eb398e3bd73c520d54112da754f" kindref="member">SYX_OBJECT_DATA</ref><sp/>(frame_oop);</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>frame-&gt;<ref refid="struct_syx_interp_frame_1f3ecaeed999a18d99d3fd27e9450ab41" kindref="member">detached_frame</ref><sp/>=<sp/>frame_oop;</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Detach<sp/>this<sp/>frame<sp/>from<sp/>the<sp/>process<sp/>stack.</highlight></codeline>
<codeline lineno="822"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>stack<sp/>pointer<sp/>will<sp/>still<sp/>refer<sp/>to<sp/>the<sp/>process<sp/>stack<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state_update<sp/>(&amp;_syx_interp_state,<sp/>frame);</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>this_context<sp/>if<sp/>available<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>))</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1e749658ddae9b2e6f980f63a2a8cb2f5" kindref="member">SYX_CONTEXT_PART_STACK</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>)<sp/>=<sp/>frame_oop;</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1d00ad7dc6539a466500aeeb34524437a" kindref="member">SYX_CONTEXT_PART_FRAME_POINTER</ref><sp/>(frame-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>)<sp/>=<sp/><ref refid="syx-types_8h_18efde12e307dd616a32f42327b3e80cc" kindref="member">SYX_POINTER_CAST_OOP</ref><sp/>(frame);</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_1f517578c6962e7925851fb6d88ebfa98" kindref="member">SYX_BLOCK_CLOSURE_OUTER_FRAME</ref>(closure)<sp/>=<sp/>frame_oop;</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="832"><highlight class="normal"></highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><ref refid="syx-memory_8c_131d33852bc51d3d58ea0bc9fbfd4d9e1" kindref="member">syx_memory_gc_end</ref><sp/>();</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="836"><highlight class="normal">}</highlight></codeline>
<codeline lineno="837"><highlight class="normal"></highlight></codeline>
<codeline lineno="838"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_send_binary)</highlight></codeline>
<codeline lineno="839"><highlight class="normal">{</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="841"><highlight class="comment"><sp/><sp/>SyxOop<sp/>klass,<sp/>method,<sp/>context,<sp/>first_argument;</highlight></codeline>
<codeline lineno="842"><highlight class="comment"><sp/><sp/>syx_int32<sp/>primitive;</highlight></codeline>
<codeline lineno="843"><highlight class="comment"><sp/><sp/>SyxOop<sp/>binding;</highlight></codeline>
<codeline lineno="844"><highlight class="comment"><sp/><sp/>syx_int32<sp/>index;</highlight></codeline>
<codeline lineno="845"><highlight class="comment"><sp/><sp/>syx_symbol<sp/>selector;</highlight></codeline>
<codeline lineno="846"><highlight class="comment"></highlight></codeline>
<codeline lineno="847"><highlight class="comment"><sp/><sp/>first_argument<sp/>=<sp/>syx_interp_stack_pop<sp/>();</highlight></codeline>
<codeline lineno="848"><highlight class="comment"><sp/><sp/>_syx_exec_state-&gt;message_receiver<sp/>=<sp/>syx_interp_stack_pop<sp/>();</highlight></codeline>
<codeline lineno="849"><highlight class="comment"><sp/><sp/>index<sp/>=<sp/>SYX_SMALL_INTEGER<sp/>(SYX_ASSOCIATION_KEY<sp/>(_syx_exec_state-&gt;literals[argument]));</highlight></codeline>
<codeline lineno="850"><highlight class="comment"><sp/><sp/>binding<sp/>=<sp/>SYX_ASSOCIATION_VALUE<sp/>(_syx_exec_state-&gt;literals[argument]);</highlight></codeline>
<codeline lineno="851"><highlight class="comment"><sp/><sp/>selector<sp/>=<sp/>SYX_OBJECT_SYMBOL<sp/>(SYX_ASSOCIATION_KEY<sp/>(binding));</highlight></codeline>
<codeline lineno="852"><highlight class="comment"></highlight></codeline>
<codeline lineno="853"><highlight class="comment"><sp/><sp/>if<sp/>(index<sp/>&lt;<sp/>8<sp/>&amp;&amp;<sp/>SYX_IS_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>&amp;&amp;<sp/>SYX_IS_SMALL_INTEGER(first_argument))</highlight></codeline>
<codeline lineno="854"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="855"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>switch<sp/>(index)</highlight></codeline>
<codeline lineno="856"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="857"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>0:</highlight></codeline>
<codeline lineno="858"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_small_integer_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>+<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="859"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="860"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>1:</highlight></codeline>
<codeline lineno="861"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_small_integer_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>-<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="862"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="863"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>2:</highlight></codeline>
<codeline lineno="864"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>&lt;<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="865"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="866"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>3:</highlight></codeline>
<codeline lineno="867"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>&gt;<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="868"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="869"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>4:</highlight></codeline>
<codeline lineno="870"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>&lt;=<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="871"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="872"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>5:</highlight></codeline>
<codeline lineno="873"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>&gt;=<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="874"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="875"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>6:</highlight></codeline>
<codeline lineno="876"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>==<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="877"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="878"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>case<sp/>7:</highlight></codeline>
<codeline lineno="879"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syx_interp_stack_push<sp/>(syx_boolean_new<sp/>(SYX_SMALL_INTEGER(_syx_exec_state-&gt;message_receiver)<sp/>!=<sp/>SYX_SMALL_INTEGER(first_argument)));</highlight></codeline>
<codeline lineno="880"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>TRUE;</highlight></codeline>
<codeline lineno="881"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="882"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="883"><highlight class="comment"></highlight></codeline>
<codeline lineno="884"><highlight class="comment"><sp/><sp/>klass<sp/>=<sp/>syx_object_get_class<sp/>(_syx_exec_state-&gt;message_receiver);</highlight></codeline>
<codeline lineno="885"><highlight class="comment"><sp/><sp/>method<sp/>=<sp/>syx_class_lookup_method_binding<sp/>(klass,<sp/>binding);</highlight></codeline>
<codeline lineno="886"><highlight class="comment"></highlight></codeline>
<codeline lineno="887"><highlight class="comment">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="888"><highlight class="comment"><sp/><sp/>syx_debug<sp/>(&quot;BYTECODE<sp/>-<sp/>Send<sp/>binary<sp/>message<sp/>#%s\n&quot;,<sp/>selector);</highlight></codeline>
<codeline lineno="889"><highlight class="comment">#endif</highlight></codeline>
<codeline lineno="890"><highlight class="comment"></highlight></codeline>
<codeline lineno="891"><highlight class="comment"><sp/><sp/>if<sp/>(SYX_IS_NIL<sp/>(method))</highlight></codeline>
<codeline lineno="892"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="893"><highlight class="comment">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="894"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>syx_debug<sp/>(&quot;BYTECODE<sp/>-<sp/>NOT<sp/>UNDERSTOOD<sp/>binary<sp/>#%s\n&quot;,<sp/>selector);</highlight></codeline>
<codeline lineno="895"><highlight class="comment">#endif</highlight></codeline>
<codeline lineno="896"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>syx_signal_does_not_understand<sp/>(_syx_exec_state-&gt;message_receiver,<sp/>syx_symbol_new<sp/>(selector));</highlight></codeline>
<codeline lineno="897"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="898"><highlight class="comment"></highlight></codeline>
<codeline lineno="899"><highlight class="comment"><sp/><sp/>if<sp/>(_syx_exec_state-&gt;message_arguments)</highlight></codeline>
<codeline lineno="900"><highlight class="comment"><sp/><sp/><sp/><sp/>syx_free<sp/>(_syx_exec_state-&gt;message_arguments);</highlight></codeline>
<codeline lineno="901"><highlight class="comment"><sp/><sp/></highlight></codeline>
<codeline lineno="902"><highlight class="comment"><sp/><sp/>_syx_exec_state-&gt;message_arguments<sp/>=<sp/>(SyxOop<sp/>*)<sp/>syx_calloc<sp/>(1,<sp/>sizeof<sp/>(SyxOop));</highlight></codeline>
<codeline lineno="903"><highlight class="comment"><sp/><sp/>_syx_exec_state-&gt;message_arguments[0]<sp/>=<sp/>first_argument;</highlight></codeline>
<codeline lineno="904"><highlight class="comment"></highlight></codeline>
<codeline lineno="905"><highlight class="comment"><sp/><sp/>primitive<sp/>=<sp/>SYX_SMALL_INTEGER<sp/>(SYX_METHOD_PRIMITIVE<sp/>(method));</highlight></codeline>
<codeline lineno="906"><highlight class="comment"><sp/><sp/>if<sp/>(primitive<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>primitive<sp/>&lt;<sp/>SYX_PRIMITIVES_MAX)</highlight></codeline>
<codeline lineno="907"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>syx_interp_call_primitive<sp/>(primitive,<sp/>method);</highlight></codeline>
<codeline lineno="908"><highlight class="comment"><sp/><sp/>else<sp/>if<sp/>(primitive<sp/>==<sp/>-2)</highlight></codeline>
<codeline lineno="909"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>syx_plugin_call_interp<sp/>(_syx_exec_state,<sp/>method);</highlight></codeline>
<codeline lineno="910"><highlight class="comment"></highlight></codeline>
<codeline lineno="911"><highlight class="comment"><sp/><sp/>syx_memory_gc_begin<sp/>();</highlight></codeline>
<codeline lineno="912"><highlight class="comment"><sp/><sp/>context<sp/>=<sp/>syx_method_context_new<sp/>(_syx_exec_state-&gt;context,<sp/>method,<sp/>_syx_exec_state-&gt;message_receiver,</highlight></codeline>
<codeline lineno="913"><highlight class="comment"><sp/><sp/><sp/><sp/>syx_array_new<sp/>(1,<sp/>_syx_exec_state-&gt;message_arguments));</highlight></codeline>
<codeline lineno="914"><highlight class="comment"><sp/><sp/>syx_memory_gc_end<sp/>();</highlight></codeline>
<codeline lineno="915"><highlight class="comment"><sp/><sp/>_syx_exec_state-&gt;message_arguments<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="916"><highlight class="comment"></highlight></codeline>
<codeline lineno="917"><highlight class="comment"><sp/><sp/>return<sp/>syx_interp_enter_context<sp/>(context);*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="919"><highlight class="normal">}</highlight></codeline>
<codeline lineno="920"><highlight class="normal"></highlight></codeline>
<codeline lineno="921"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_do_special)</highlight></codeline>
<codeline lineno="922"><highlight class="normal">{</highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>returned_object;</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>condition;</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>jump;</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_11121caba2d40b2ce090b640762744ccd" kindref="member">SyxOop</ref><sp/>ensure_block;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"></highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(argument)</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a023b7226e43e34c7f769e204a8dae32f1" kindref="member">SYX_BYTECODE_POP_TOP</ref>:</highlight></codeline>
<codeline lineno="931"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="932"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Pop<sp/>top\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="933"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="934"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref>--;</highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a0c9bf157dafea879931bf6a77a5373a7b" kindref="member">SYX_BYTECODE_SELF_RETURN</ref>:</highlight></codeline>
<codeline lineno="937"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="938"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Self<sp/>return\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="939"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="940"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_SYX_INTERP_IN_BLOCK)</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>))</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>for<sp/>ensured<sp/>blocks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ensure_block<sp/>=<sp/><ref refid="syx-object_8h_13616e0a78f2864fb41d8fb1763351d61" kindref="member">SYX_BLOCK_CONTEXT_ENSURE_BLOCK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>);</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1d906bc6552333687f0f006132d38c07b" kindref="member">SYX_IS_TRUE</ref><sp/>(ensure_block))</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ensured<sp/>block<sp/>has<sp/>been<sp/>called,</highlight></codeline>
<codeline lineno="949"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>so<sp/>pop<sp/>its<sp/>returned<sp/>object<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref>--;</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_13616e0a78f2864fb41d8fb1763351d61" kindref="member">SYX_BLOCK_CONTEXT_ENSURE_BLOCK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>)<sp/>=<sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(ensure_block))</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>no<sp/>arguments<sp/>passed<sp/>to<sp/>the<sp/>ensure<sp/>block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>decrease<sp/>instruction<sp/>pointer<sp/>re-execute<sp/>self-return<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref>--;</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>set<sp/>the<sp/>ensure<sp/>block<sp/>to<sp/>true,<sp/>so<sp/>that<sp/>next<sp/>time<sp/>self-return<sp/>bytecode<sp/>is<sp/>executed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_13616e0a78f2864fb41d8fb1763351d61" kindref="member">SYX_BLOCK_CONTEXT_ENSURE_BLOCK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>)<sp/>=<sp/><ref refid="syx-object_8c_1420b624002efae10b26b6ae50e4a2676" kindref="member">syx_true</ref>;</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_frame_prepare_new_closure<sp/>(&amp;_syx_interp_state,<sp/>ensure_block);</highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>returned_object<sp/>=<sp/><ref refid="syx-interp_8h_145923c7b4635a8225267ddd73d208b1d" kindref="member">syx_interp_stack_pop</ref><sp/>();</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>returned_object<sp/>=<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1c40cce129c0dadcfe2bae7ccdbdc431b" kindref="member">receiver</ref>;</highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-interp_8c_10c2ace1d18e0f3649ca19345bb5a89d5" kindref="member">syx_interp_leave_and_answer</ref><sp/>(returned_object,<sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="972"><highlight class="normal"></highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a0ea06c76d0ce11dc7d538110dc01ce6b0" kindref="member">SYX_BYTECODE_STACK_RETURN</ref>:</highlight></codeline>
<codeline lineno="974"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="975"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Stack<sp/>return\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="976"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="977"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_SYX_INTERP_IN_BLOCK)</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>))</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>for<sp/>ensure<sp/>blocks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ensure_block<sp/>=<sp/><ref refid="syx-object_8h_13616e0a78f2864fb41d8fb1763351d61" kindref="member">SYX_BLOCK_CONTEXT_ENSURE_BLOCK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>);</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="syx-object_8h_1d906bc6552333687f0f006132d38c07b" kindref="member">SYX_IS_TRUE</ref><sp/>(ensure_block))</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ensured<sp/>block<sp/>has<sp/>been<sp/>called,</highlight></codeline>
<codeline lineno="987"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>so<sp/>pop<sp/>its<sp/>returned<sp/>object<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1034d55521abf77019c77090a5bef941f" kindref="member">stack</ref>--;</highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_13616e0a78f2864fb41d8fb1763351d61" kindref="member">SYX_BLOCK_CONTEXT_ENSURE_BLOCK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>)<sp/>=<sp/><ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>;</highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_1a0618a2af4e0706b7080c6946ae43ee3" kindref="member">SYX_IS_NIL</ref><sp/>(ensure_block))</highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>no<sp/>arguments<sp/>passed<sp/>to<sp/>the<sp/>ensure<sp/>block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_14ae56ccb657af2c4933b3ee8353b071e" kindref="member">message_arguments_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>decrease<sp/>instruction<sp/>pointer<sp/>re-execute<sp/>self-return<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref>--;</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>set<sp/>the<sp/>ensure<sp/>block<sp/>to<sp/>true,<sp/>so<sp/>that<sp/>next<sp/>time<sp/>self-return<sp/>bytecode<sp/>is<sp/>executed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-object_8h_13616e0a78f2864fb41d8fb1763351d61" kindref="member">SYX_BLOCK_CONTEXT_ENSURE_BLOCK</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_137d33bf761d4f34c55da10cbf9d3df63" kindref="member">this_context</ref>)<sp/>=<sp/><ref refid="syx-object_8c_1420b624002efae10b26b6ae50e4a2676" kindref="member">syx_true</ref>;</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_frame_prepare_new_closure<sp/>(&amp;_syx_interp_state,<sp/>ensure_block);</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"></highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>returned_object<sp/>=<sp/><ref refid="syx-interp_8h_145923c7b4635a8225267ddd73d208b1d" kindref="member">syx_interp_stack_pop</ref><sp/>();</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"></highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-interp_8c_10c2ace1d18e0f3649ca19345bb5a89d5" kindref="member">syx_interp_leave_and_answer</ref><sp/>(returned_object,<sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>);</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a0b29849423875a174db5ad5704e25bbba" kindref="member">SYX_BYTECODE_BRANCH_IF_TRUE</ref>:</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a0f8346aa291a41ebc596a336096a39fcd" kindref="member">SYX_BYTECODE_BRANCH_IF_FALSE</ref>:</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="1012"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Conditional\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="1014"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>condition<sp/>=<sp/><ref refid="syx-interp_8h_145923c7b4635a8225267ddd73d208b1d" kindref="member">syx_interp_stack_pop</ref><sp/>();</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>jump<sp/>=<sp/>_syx_interp_get_next_byte<sp/>();</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="syx-object_8h_14748238146463f5f05f8c11ff422b6d3" kindref="member">SYX_IS_BOOLEAN</ref><sp/>(condition))</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8c_10b4ecf0c440811157a5bc63545665742" kindref="member">syx_signal</ref><sp/>(<ref refid="syx-enums_8h_14b3bc4c6edc3fea1ee42d40b28384101569a8cbd1f0f3c1108becc4c35b55603" kindref="member">SYX_ERROR_INTERP</ref>,<sp/><ref refid="syx-object_8h_1ef1b7868c0a729cc4f27596291a9e08d" kindref="member">syx_string_new</ref><sp/>(</highlight><highlight class="stringliteral">&quot;Condition<sp/>must<sp/>be<sp/>boolean&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1018"><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>jump<sp/>to<sp/>the<sp/>other<sp/>conditional<sp/>branch<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((argument<sp/>==<sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a0b29849423875a174db5ad5704e25bbba" kindref="member">SYX_BYTECODE_BRANCH_IF_TRUE</ref><sp/>?<sp/><ref refid="syx-object_8h_1bc047647f8b39be70f2e2a2e205a9923" kindref="member">SYX_IS_FALSE</ref><sp/>(condition)<sp/>:<sp/><ref refid="syx-object_8h_1d906bc6552333687f0f006132d38c07b" kindref="member">SYX_IS_TRUE</ref><sp/>(condition)))</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(<ref refid="syx-object_8c_1b1522ab23d05036a843da6f50860c45d" kindref="member">syx_nil</ref>);</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref><sp/>=<sp/>jump;</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a07d08b2db595f79461a7b6ec9f751dcaf" kindref="member">SYX_BYTECODE_BRANCH</ref>:</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="1029"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Branch\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="1031"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>jump<sp/>=<sp/>_syx_interp_get_next_byte<sp/>();</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jump)</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref><sp/>=<sp/>jump;</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"></highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="syx-enums_8h_1c28bf33befde579fdfc5b282947c25a0b6373a51003fdf604f64ae9558a5f206" kindref="member">SYX_BYTECODE_DUPLICATE</ref>:</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="1038"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-<sp/>Duplicate\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="1040"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-interp_8h_172950794ade0181c2f6dbb4f7eb56188" kindref="member">syx_interp_stack_push</ref><sp/>(<ref refid="syx-interp_8h_1441849bafd3d13926bea2008361f6d47" kindref="member">syx_interp_stack_peek</ref><sp/>());</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_BYTECODE</highlight></codeline>
<codeline lineno="1045"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;BYTECODE<sp/>-------<sp/>UNKNOWN<sp/>--------\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="1047"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="syx-error_8c_10b4ecf0c440811157a5bc63545665742" kindref="member">syx_signal</ref><sp/>(<ref refid="syx-enums_8h_14b3bc4c6edc3fea1ee42d40b28384101569a8cbd1f0f3c1108becc4c35b55603" kindref="member">SYX_ERROR_INTERP</ref>,<sp/><ref refid="syx-object_8h_1ef1b7868c0a729cc4f27596291a9e08d" kindref="member">syx_string_new</ref><sp/>(</highlight><highlight class="stringliteral">&quot;Unknown<sp/>bytecode:<sp/>%p&quot;</highlight><highlight class="normal">,<sp/>argument));</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1a8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="1052"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"></highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><ref refid="syx-interp_8h_1c8a67ae79ddd303b4bbdbc71573a5090" kindref="member">SYX_FUNC_INTERPRETER</ref><sp/>(syx_interp_do_extended)</highlight></codeline>
<codeline lineno="1055"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_117bf8fdae73c510d8e75076664ce9e4b" kindref="member">SyxInterpreterFunc</ref><sp/>handler;</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>command<sp/>=<sp/>argument;</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/>argument<sp/>=<sp/>_syx_interp_get_next_byte<sp/>();</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/>handler<sp/>=<sp/>handlers[command];</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>handler<sp/>(argument);</highlight></codeline>
<codeline lineno="1061"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight></codeline>
<codeline lineno="1063"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref></highlight></codeline>
<codeline lineno="1064"><highlight class="normal">_syx_interp_get_next_byte<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1065"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SYX_DEBUG_TRACE_IP</highlight></codeline>
<codeline lineno="1067"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><ref refid="syx-error_8h_1b1279ef115dd518ef5b63b51ae495fa5" kindref="member">syx_debug</ref><sp/>(</highlight><highlight class="stringliteral">&quot;TRACE<sp/>IP<sp/>-<sp/>Fetch<sp/>at<sp/>ip<sp/>%d<sp/>bytecode:<sp/>%u<sp/>-<sp/>%p\n&quot;</highlight><highlight class="normal">,<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref>,<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_1b33dbca8378dfa3df5a770d07e1c206f" kindref="member">method_bytecodes</ref>[_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref>],<sp/>_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>);</highlight></codeline>
<codeline lineno="1068"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="1069"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="syx-platform_8h_17243fce3949aef0f36062013ef55d850" kindref="member">SYX_COMPAT_SWAP_16</ref><sp/>(_syx_interp_state.<ref refid="struct_syx_interp_state_1b33dbca8378dfa3df5a770d07e1c206f" kindref="member">method_bytecodes</ref>[_syx_interp_state.<ref refid="struct_syx_interp_state_19b12d244885322068035a55236f27a37" kindref="member">frame</ref>-&gt;<ref refid="struct_syx_interp_frame_1d45f49115a5305fc901fceca4c72d32e" kindref="member">next_instruction</ref>++]);</highlight></codeline>
<codeline lineno="1071"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"></highlight></codeline>
<codeline lineno="1073"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="syx-types_8h_1c6dc09b276b99fa1956364359139daab" kindref="member">syx_bool</ref></highlight></codeline>
<codeline lineno="1074"><highlight class="normal">_syx_interp_execute_byte<sp/>(<ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>byte)</highlight></codeline>
<codeline lineno="1075"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><ref refid="syx-types_8h_15c0caeeeb45b4575061ab7f368f10337" kindref="member">syx_uint16</ref><sp/>command,<sp/>argument;</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><ref refid="syx-interp_8h_117bf8fdae73c510d8e75076664ce9e4b" kindref="member">SyxInterpreterFunc</ref><sp/>handler;</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"></highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/>command<sp/>=<sp/>(byte<sp/>&amp;<sp/><ref refid="syx-bytecode_8h_1ce0a31c234c06b8e49fc61c5ce4ef9ed" kindref="member">SYX_BYTECODE_COMMAND_MASK</ref>)<sp/>&gt;&gt;<sp/><ref refid="syx-bytecode_8h_1a30b8b0de5a0088b12f90cbe95ab59c1" kindref="member">SYX_BYTECODE_ARGUMENT_BITS</ref>;</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/>argument<sp/>=<sp/>byte<sp/>&amp;<sp/><ref refid="syx-bytecode_8h_1a7d9adeaec378162bd06f516142722e4" kindref="member">SYX_BYTECODE_ARGUMENT_MASK</ref>;</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/>handler<sp/>=<sp/>handlers[command];</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"></highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>handler<sp/>(argument);</highlight></codeline>
<codeline lineno="1084"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/media/common/projects/syx/syx/syx-interp.c"/>
  </compounddef>
</doxygen>
